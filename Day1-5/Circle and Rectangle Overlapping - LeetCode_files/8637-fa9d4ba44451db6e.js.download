(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8637],{8458:function(e,n,t){var o=t(87537),i=t(23645)(o);i.push([e.id,".WRmCx p,.WRmCx summary{font-size:1rem!important;line-height:1.5rem!important}","",{version:3,sources:["webpack://./modules/problems/solutions/solution-details/body/solution-markdown.iso.css"],names:[],mappings:"AAKE,wBAAA,wBAAiB,CAAjB,4BAAiB",sourcesContent:[".markdown p {\n  @apply !text-base;\n}\n\n.markdown summary {\n  @apply !text-base;\n}\n"],sourceRoot:""}]),i.locals={markdown:"WRmCx"},e.exports=i},38488:function(e,n,t){"use strict";t.d(n,{Ew:function(){return i}});t(82010);var o=t(36492),i=function(){return(0,o.a)([],(function(){return null}))}},6919:function(e,n,t){"use strict";t.d(n,{$4:function(){return a},Px:function(){return l},av:function(){return o},i7:function(){return r},rr:function(){return s}});var o,i=t(88525);!function(e){e.Hot="hot",e.MostPosts="most_posts",e.MostRelevant="most_relevant",e.MostVotes="most_votes",e.NewestToOldest="newest_to_oldest",e.OldestToNewest="oldest_to_newest",e.RecentActivity="recent_activity"}(o||(o={}));var a,r,s,l=function(e){switch(e){case o.Hot:return i.OQG.Hot;case o.NewestToOldest:return i.OQG.MostRecent;case o.MostVotes:return i.OQG.MostVotes;default:return i.OQG.Hot}};!function(e){e.All="All",e.Deleted="Deleted",e.Hidden="Hidden",e.NeedUpdate="NeedUpdate",e.Open="Open",e.Pending="Pending",e.Reviewed="Reviewed",e.Muted="Muted",e.Draft="Draft"}(a||(a={})),function(e){e[e.Upvote=1]="Upvote",e[e.None=0]="None",e[e.Downvote=-1]="Downvote"}(r||(r={})),function(e){e.Body="BODY",e.Comment="COMMENT",e.Reply="REPLY",e.Title="TITLE"}(s||(s={}))},36258:function(e,n,t){"use strict";t.d(n,{h:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.293 9.293a1 1 0 111.414 1.414l-5 5a1 1 0 01-1.414 0l-5-5a1 1 0 011.414-1.414L12 13.586l4.293-4.293z",clipRule:"evenodd"})}))}))},19913:function(e,n,t){"use strict";t.d(n,{S:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.293 14.707a1 1 0 001.414-1.414l-5-5a1 1 0 00-1.414 0l-5 5a1 1 0 101.414 1.414L12 10.414l4.293 4.293z",clipRule:"evenodd"})}))}))},81117:function(e,n,t){"use strict";t.d(n,{P:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11 20a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zM17.018 5c-.26 0-.51.104-.695.288L4.837 16.773l-.463 1.853 1.853-.463L17.712 6.677A.981.981 0 0017.018 5zm-2.11-1.126a2.983 2.983 0 014.219 4.217L7.444 19.773a1 1 0 01-.464.263l-3.738.934a1 1 0 01-1.213-1.212l.934-3.739a1 1 0 01.263-.464L14.91 3.874z",clipRule:"evenodd"})}))}))},62611:function(e,n,t){"use strict";t.d(n,{Q:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{d:"M12.44 7.586a.6.6 0 10-1.2 0h1.2zm-6.734 5.035l.117-.588-.117.588zm-2.628-1.405l.424-.424-.424.424zM1.673 8.588l.588-.117-.588.117zm.292-2.966l.554.23-.554-.23zm1.89-2.304l-.333-.499.334.5zm2.853-.265a.6.6 0 000-1.2v1.2zm.25 3.434a.6.6 0 00.848.849l-.849-.849zm5.154-3.457a.6.6 0 10-.849-.849l.849.849zm-2.82-1.197a.6.6 0 000 1.2v-1.2zm2.546.6h.6a.6.6 0 00-.6-.6v.6zm-.6 2.566a.6.6 0 001.2 0h-1.2zm.003 2.587c0 .897-.266 1.774-.764 2.52l.998.666c.63-.943.966-2.052.966-3.186h-1.2zm-.764 2.52a4.533 4.533 0 01-2.035 1.669l.46 1.108a5.733 5.733 0 002.573-2.111l-.998-.667zm-2.035 1.669a4.534 4.534 0 01-2.619.258L5.59 13.21a5.733 5.733 0 003.313-.327l-.46-1.108zm-2.619.258a4.533 4.533 0 01-2.321-1.241l-.849.849A5.733 5.733 0 005.59 13.21l.234-1.177zm-2.321-1.241a4.533 4.533 0 01-1.24-2.321l-1.178.234a5.734 5.734 0 001.57 2.936l.848-.849zm-1.24-2.321a4.533 4.533 0 01.257-2.62l-1.108-.459a5.733 5.733 0 00-.327 3.313l1.177-.234zm.257-2.62a4.533 4.533 0 011.67-2.034l-.667-.998a5.733 5.733 0 00-2.111 2.573l1.108.46zm1.67-2.034a4.533 4.533 0 012.519-.764v-1.2a5.733 5.733 0 00-3.186.966l.667.998zm3.617 3.519l4.306-4.306-.849-.849-4.306 4.306.849.849zm1.487-4.303h2.545v-1.2H9.293v1.2zm1.945-.6v2.566h1.2V2.433h-1.2z"})}))}))},7367:function(e,n,t){"use strict";t.d(n,{j:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M20 5h-4V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v1H4a1 1 0 000 2h1v12a3 3 0 003 3h8a3 3 0 003-3V7h1a1 1 0 100-2zm-6-1v1h-4V4h4zm-5 6a1 1 0 012 0v7a1 1 0 11-2 0v-7zm4 0a1 1 0 112 0v7a1 1 0 11-2 0v-7zM7 7h10v12a1 1 0 01-1 1H8a1 1 0 01-1-1V7z",clipRule:"evenodd"})}))}))},7822:function(e,n,t){"use strict";t.d(n,{Q:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zM10.944 9.835a1.25 1.25 0 012.429.417c0 .253-.226.555-.68.857a4.039 4.039 0 01-.886.446 1 1 0 10.632 1.897c.358-.12.855-.34 1.364-.679.952-.635 1.57-1.458 1.57-2.52a3.25 3.25 0 00-6.316-1.081 1 1 0 001.887.663zM11.186 16v.135a1 1 0 102 0V16a1 1 0 10-2 0z",clipRule:"evenodd"})}))}))},67962:function(e,n,t){"use strict";t.d(n,{J:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M13 7a1 1 0 011-1h2a6 6 0 010 12h-2a1 1 0 110-2h2a4 4 0 000-8h-2a1 1 0 01-1-1zm-3 10a1 1 0 01-1 1H8A6 6 0 018 6h1a1 1 0 010 2H8a4 4 0 100 8h1a1 1 0 011 1zm-1-6h6a1 1 0 110 2H9a1 1 0 110-2z",clipRule:"evenodd"})}))}))},46283:function(e,n,t){"use strict";t.d(n,{j:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M19 11.063V7h-2v1a1 1 0 11-2 0V7H9v1a1 1 0 01-2 0V7H5v4.063h14zm0 2H5V19h14v-5.938zM9 5h6V4a1 1 0 112 0v1h2a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2V4a1 1 0 012 0v1z",clipRule:"evenodd"})}))}))},25132:function(e,n,t){"use strict";t.d(n,{H:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M14.707 2.707a1 1 0 00-1.414-1.414l-2 2a1 1 0 00-.15 1.221l1.5 2.5a1 1 0 001.714-1.029l-.454-.757a8 8 0 11-6.347 1.119 1 1 0 00-1.112-1.662A9.991 9.991 0 002 13c0 5.523 4.477 10 10 10s10-4.477 10-10c0-4.775-3.347-8.769-7.823-9.762l.53-.53zM13 10a1 1 0 10-2 0v4a1 1 0 00.445.832l3 2a1 1 0 001.11-1.664L13 13.465V10z",clipRule:"evenodd"})}))}))},39940:function(e,n,t){"use strict";t.d(n,{w:function(){return r}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294).forwardRef((function(e,n){return(0,a.jsx)("svg",(0,i.Z)((0,o.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M13.27 5.02c.456.1.764.562.727 1.06l-.015.116-2.181 12c-.099.541-.578.893-1.07.784-.457-.1-.765-.562-.728-1.06l.015-.116 2.181-12c.099-.541.578-.893 1.07-.784zm4.65.37l.07.096 3.857 6c.178.277.2.614.067.906l-.067.123-3.857 6c-.304.473-.962.627-1.47.342-.47-.264-.646-.812-.425-1.268l.058-.104L19.678 12l-3.525-5.485c-.283-.44-.161-1.001.264-1.307l.103-.065a1.123 1.123 0 011.4.246zm-11.84 0c.3-.365.83-.49 1.28-.305l.12.058.103.065a.96.96 0 01.326 1.194l-.062.113L4.322 12l3.525 5.485.058.104c.221.456.046 1.005-.425 1.268a1.123 1.123 0 01-1.4-.246l-.07-.097-3.857-6-.067-.122a.939.939 0 010-.784l.067-.123 3.857-6 .07-.096z",clipRule:"evenodd"})}))}))},14150:function(e,n,t){"use strict";var o,i,a;t.d(n,{ZL:function(){return a},f:function(){return o},i6:function(){return i}}),function(e){e.Best="best",e.Hot="hot",e.MostRelevant="most_relevant",e.MostVotes="most_votes",e.NewestToOldest="newest_to_oldest",e.OldestToNewest="oldest_to_newest"}(o||(o={})),function(e){e.Up="up",e.Down="down",e.None="none"}(i||(i={})),function(e){e.Abuse="ABUSE",e.Advertising="ADVERTISING",e.All="ALL",e.Fake="FAKE",e.Illegal="ILLEGAL",e.NonEnglish="NON_ENGLISH",e.Other="OTHER",e.Politics="POLITICS",e.Sexual="SEXUAL",e.Terrorism="TERRORISM",e.Violent="VIOLENT"}(a||(a={}))},41108:function(e,n,t){"use strict";t.d(n,{V:function(){return St}});var o=t(47568),i=t(26042),a=t(69396),r=t(70655),s=t(85893),l=t(67294),u=t(11321),c=t(50632),d=t(19579),m=t(26622),f=t(69485),v=t(83269),p=t(12922),h=t(29297),x=t(73975),C=t(10253),y=t(32601),g=t(15371),j=t(19898),b=t(14924),N=t(84539),w=t(6919),I=t(95549),k=t(44876),S=t(57002),Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e){var t=e.value.length||0;e.setSelectionRange(t,t),n?setTimeout((function(){return e.focus()}),n):e.focus()}},T=t(4563),q=function(){var e=(0,l.useState)(!1),n=e[0],t=e[1],o=(0,l.useState)(null),i=o[0],a=o[1],r=function(){return t(!0)},s=function(){return t(!1)};return(0,l.useEffect)((function(){if(i)return i.addEventListener("mouseover",r),i.addEventListener("mouseleave",s),function(){i.removeEventListener("mouseover",r),i.removeEventListener("mouseleave",s)}}),[i]),[a,n]},R=t(8590),L=t(73082),B=t(53028),D=t(70341),_=t(27459),M=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{d:"M8.735 2.13a1 1 0 00-1.47 0L1.55 8.321C.96 8.962 1.412 10 2.284 10H6v2.667C6 13.403 6.597 14 7.334 14h1.333C9.403 14 10 13.403 10 12.667V10h3.716c.872 0 1.326-1.038.735-1.678L8.735 2.129z"})}))})),H=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.333 8.667v4h1.334v-4h4.288L8 3.299 3.045 8.667h4.288zm-1.333 4C6 13.403 6.597 14 7.333 14h1.334C9.403 14 10 13.403 10 12.667V10h3.716c.872 0 1.326-1.038.735-1.678L8.735 2.129a1 1 0 00-1.47 0L1.55 8.322C.958 8.962 1.412 10 2.284 10H6v2.667z",clipRule:"evenodd"})}))})),A=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{d:"M10 3.333V6h3.716c.872 0 1.326 1.038.735 1.678l-5.716 6.193a1 1 0 01-1.47 0L1.55 7.678C.96 7.038 1.412 6 2.284 6H6V3.333C6 2.597 6.597 2 7.334 2h1.333C9.403 2 10 2.597 10 3.333z"})}))})),E=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.667 7.333v-4H7.334v4H3.046L8 12.701l4.955-5.368H8.667zm-.912 5.633zM6 3.333C6 2.597 6.597 2 7.334 2h1.333C9.403 2 10 2.597 10 3.333V6h3.716c.872 0 1.326 1.038.735 1.678l-5.716 6.193a1 1 0 01-1.47 0L1.55 7.678C.96 7.038 1.412 6 2.284 6H6V3.333z",clipRule:"evenodd"})}))})),z=t(76575),P=function(e){var n,t,o=e.voteCount,i=e.disabled,a=e.isMyself,r=e.hasLike,l=e.onLikeClick,u=e.hasDislike,c=e.onDislikeClick,d=i||a;return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(z.E,{label:(0,_.ZP)(o),labelClassName:(0,p.yI)("cursor-pointer",g.Cj.label3,g.Cj.label2Hover),disabled:d,onIconClick:l,icon:r?M:H,iconClassName:(0,p.yI)("w-[18px] h-[18px] cursor-pointer",(n={},(0,b.Z)(n,"".concat(g.Cj.label4),!r&&d),(0,b.Z)(n,"".concat(g.Cj.labelGrey6," ").concat(g.Cj.labelGrey7Hover),!r&&!d),(0,b.Z)(n,"".concat(g.Cj.labelGreenStandard," ").concat(g.Cj.labelGreenStandardHover," "),r),n)),className:(0,p.yI)("gap-2 transition-colors")}),(0,s.jsx)(z.E,{disabled:d,onIconClick:c,icon:u?A:E,className:(0,p.yI)("transition-colors"),iconClassName:(0,p.yI)("w-[18px] h-[18px] cursor-pointer",(t={},(0,b.Z)(t,"".concat(g.Cj.label4),!u&&d),(0,b.Z)(t,"".concat(g.Cj.labelGrey6," ").concat(g.Cj.labelGrey7Hover),!u&&!d),(0,b.Z)(t,"".concat(g.Cj.labelGrey7," ").concat(g.Cj.labelGrey7Hover," "),u),t))})]})},O=t(63244);function G(e,n){var t=n.type,o=n.payload;switch(t){case"resetState":return(0,a.Z)((0,i.Z)({},e),{topicId:null,highlightedCommentId:void 0,parentOfHighlightedCommentId:void 0});case"setIntentionTags":return(0,a.Z)((0,i.Z)({},e),{tagNamesMap:new Map(o.map((function(e){return[e.slug,e.name]})))});default:return(0,a.Z)((0,i.Z)({},e),(0,b.Z)({},t,o))}}var V={topicId:null,isModerator:!1,highlightedCommentId:void 0,parentOfHighlightedCommentId:void 0,layoutType:O.Dk.Discuss,commentsTopAnchor:null,tagNamesMap:new Map,content:"",intentionTag:void 0,panelSide:"left",panelIsSmall:!1,containerDom:null,questionSlug:void 0},U=(0,l.createContext)({state:V,dispatch:function(){return null}});function $(){return(0,l.useContext)(U)}var K,Q=function(e){var n=e.children,t=e.value,o=(0,l.useReducer)(G,(0,i.Z)({},V,t)),a=o[0],r=o[1],u=(0,l.useMemo)((function(){return{state:a,dispatch:r}}),[a]);return(0,s.jsx)(U.Provider,{value:u,children:n})},F=t(85945),W=t(88525),Y=t(63808);!function(e){e.QuestionComment="questionDiscussComments",e.Reply="commentReplies"}(K||(K={}));var J=function(e){var n=e.postId,t=e.commentId,o=e.changeComment,r=e.queryClient,s=e.key;r.setQueryData(s,(function(e){var r=function(e,n){switch(e[0]){case K.QuestionComment:var t;return(null===n||void 0===n||null===(t=n.topicComments)||void 0===t?void 0:t.data)||[];case K.Reply:return(null===n||void 0===n?void 0:n.commentReplies)||[]}}(s,e),l=null===r||void 0===r?void 0:r.map((function(e){return e.post.id===n||e.id===t?o(e):e})),u=function(e,n,t){switch(e[0]){case K.QuestionComment:return{topicComments:(0,a.Z)((0,i.Z)({},t.topicComments),{data:n})};case K.Reply:return{commentReplies:n}}}(s,l,e);return(0,i.Z)({},u)}))};var X,ee,ne,te=function(e){var n=(0,F.NL)();return(0,W.sbl)(Y.f6,{onSuccess:function(t,o){var r,s;!function(e){var n=e.postId,t=e.voteStatus,o=e.queryClient,r=e.key;J({postId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.post=(0,a.Z)((0,i.Z)({},n.post),{voteCount:e.post.voteCount+(t-e.post.voteStatus),voteStatus:t}),n},queryClient:o,key:r})}({postId:o.postId,voteStatus:(null===(r=t.votePost)||void 0===r||null===(s=r.post)||void 0===s?void 0:s.voteStatus)||0,queryClient:n,key:e})}})},oe=t(14150);!function(e){e.QdSolutionTab="QD_Solution_Tab",e.QdDiscussTab="QD_Discuss_Tab",e.QdSolutionTabComment="QD_Solution_Tab_comment",e.QdDiscussTabComment="QD_Discuss_Tab_comment",e.QdSolutionTabReply="QD_Solution_Tab_reply",e.QdDiscussTabReply="QD_Discuss_Tab_reply"}(X||(X={})),function(e){e.Comment="comment",e.Reply="reply"}(ee||(ee={})),function(e){e.SolutionTab="solution_tab",e.DiscussTab="discuss_tab",e.DescriptionTab="description_tab"}(ne||(ne={}));var ie=function(e){switch(e){case O.Dk.Solution:case O.Dk.OfficialSolution:return ne.SolutionTab;case O.Dk.Discuss:return ne.DiscussTab;case O.Dk.Description:return ne.DescriptionTab;default:return""}},ae=function(e){var n,t,o,i,a,r,m=e.comment,f=e.isMyself,x=e.trackingCommentType,C=(0,u.$G)("comments").t,y=te(m.queryKey),j=y.mutateAsync,b=y.isLoading,N=Boolean(null===(n=(0,c.U5)())||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.userStatus)||void 0===o?void 0:o.isSignedIn),w=Boolean(null===(i=(0,c.U5)())||void 0===i||null===(a=i.data)||void 0===a||null===(r=a.userStatus)||void 0===r?void 0:r.isVerified),I=$().state,k=I.layoutType,S=I.questionSlug,Z=m.voteCount,T=m.voteStatus,q=m.postId,R=(0,l.useCallback)((function(){return N?w||d.y.error((0,s.jsxs)("span",{children:[C("youMust")," ",(0,s.jsx)("a",{href:D.Hb.profileHome(),target:"_blank",rel:"noreferrer",className:(0,p.yI)(g.Cj.labelBlueStandard),children:C("verifyYourEmail")})," ",C("first"),"."]}),{itemClassName:g.Cj.bgLayer3}):d.y.error(C("common:loginRequired"),{itemClassName:g.Cj.bgLayer3}),N&&w}),[N,w,C]),L=(0,l.useCallback)((function(e){R()&&j({postId:q,voteStatus:e}).then((function(n){var t,o;(null===n||void 0===n||null===(t=n.votePost)||void 0===t?void 0:t.ok)?S&&(1===e&&h.d.qdUpVoteCommentClick({qd_version:(0,v.in)(),qd_question_slug:S,qd_comment_pos:ie(k),qd_comment_type:x}),-1===e&&h.d.qdDownVoteCommentClick({qd_version:(0,v.in)(),qd_question_slug:S,qd_comment_pos:ie(k),qd_comment_type:x})):d.y.error((null===n||void 0===n||null===(o=n.votePost)||void 0===o?void 0:o.error)||C("somethingWentWrong"),{itemClassName:g.Cj.bgLayer3})}))}),[R,j,q,C,k,S,x]),B=[T===oe.i6.Up,T===oe.i6.Down],_=B[0],M=B[1],H=(0,l.useCallback)((function(){L(_?0:1)}),[L,_]),A=(0,l.useCallback)((function(){L(M?0:-1)}),[L,M]);return(0,s.jsx)(P,{disabled:b,isMyself:f,hasLike:_,onLikeClick:H,hasDislike:M,onDislikeClick:A,voteCount:Z})},re=t(90908),se=function(e){var n=e.onClick,t=e.showReplies,o=e.showLabel,i=e.repliesNum,a=void 0===i?0:i,r=(0,u.$G)("comments").t,l=String((0,_.ZP)(a)),c=o?t?r("hideReplies"):r("showReplies",{num:l}):"".concat(l);return a<1?null:(0,s.jsx)(z.E,{label:c,icon:re.f,iconClassName:(0,p.yI)("w-4.5 h-4.5",g.Cj.labelGrey6,g.Cj.labelGrey7GroupHover),labelClassName:(0,p.yI)(g.Cj.label3,g.Cj.label2GroupHover),className:(0,p.yI)("group shrink-0 cursor-pointer transition-colors"),onClick:n})},le=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.83 2.106c.628-.634 1.71-.189 1.71.704v2.065c4.821.94 6.97 4.547 7.73 8.085l-.651.14.652-.134c.157.757-.83 1.192-1.284.565l-.007-.009c-1.528-2.055-3.576-3.332-6.44-3.502v2.352c0 .893-1.082 1.338-1.71.704L1.091 8.295a1 1 0 010-1.408l4.737-4.78zm7.303 8.617C12.08 8.495 10.204 6.68 7.046 6.14c-.47-.08-.84-.486-.84-.99V3.62L2.271 7.591l3.934 3.971V9.667a.993.993 0 011.018-.995c2.397.065 4.339.803 5.909 2.051z",clipRule:"evenodd"})}))})),ue=function(e){var n=e.onClick,t=e.showLabel,o=(0,u.$G)("comments").t;return(0,s.jsx)(z.E,{onClick:n,label:t?o("reply"):void 0,icon:le,iconClassName:(0,p.yI)("w-4.5 h-4.5",g.Cj.labelGrey6,g.Cj.labelGrey7GroupHover),labelClassName:(0,p.yI)(g.Cj.label3,g.Cj.label2GroupHover),className:(0,p.yI)("group cursor-pointer gap-1 transition-colors")})},ce=t(81117),de=function(e){var n=e.isOwnPost,t=e.onClick,o=e.showLabel,i=(0,u.$G)("comments").t;return $().state.isModerator||n?(0,s.jsx)(z.E,{onClick:t,label:o?i("edit"):void 0,icon:ce.P,iconClassName:(0,p.yI)("w-4.5 h-4.5",g.Cj.labelGrey6,g.Cj.labelGrey7GroupHover),labelClassName:(0,p.yI)(g.Cj.label3,g.Cj.label2GroupHover),className:(0,p.yI)("group cursor-pointer gap-1 transition-colors")}):null},me=t(24974),fe=t(62611),ve=function(e){var n=e.commentId,t=e.showLabel,o=e.onShareClick,i=(0,u.$G)("comments").t,a=(0,C.Z)((0,me.c)(window.location.href,{successDuration:1e3}),2),r=a[0],c=a[1],m=$().state.layoutType;(0,l.useEffect)((function(){r&&d.y.success(i("shareCopySuccess"),{itemClassName:g.Cj.bgLayer3})}),[r,i]);var f=(0,l.useCallback)((function(){var e=function(e){var n=(window.location.href.includes("/comments/")?"".concat(window.location.href.split("/comments/")[0],"/"):window.location.href.split("?")[0]).split("#")[0];return e!==O.Dk.Description||n.includes("/description/")?n:"".concat(n,"description/")}(m);c("".concat(e,"comments/").concat(n)),o&&o()}),[m,c,n,o]);return(0,s.jsxs)("div",{className:(0,p.yI)("group flex cursor-pointer items-center space-x-1"),onClick:f,children:[(0,s.jsx)("span",{children:(0,s.jsx)(fe.Q,{className:(0,p.yI)(g.Cj.labelGrey6,g.Cj.labelGrey7GroupHover,"h-4.5 w-4.5")})}),t&&(0,s.jsx)("span",{className:(0,p.yI)(g.Cj.label3,g.Cj.label2GroupHover),children:i("share")})]})},pe=t(52841),he=function(){return(0,W.YxC)(Y.f6)},xe=function(e){var n=(0,F.NL)();return(0,W.xim)(Y.f6,{onSuccess:function(t,o){var r,s;!function(e){var n=e.postId,t=e.isHidden,o=e.queryClient,r=e.key;J({postId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.post=(0,a.Z)((0,i.Z)({},n.post),{isHidden:t}),n},queryClient:o,key:r})}({postId:o.postId,isHidden:!!(null===(r=t.hidePost)||void 0===r||null===(s=r.post)||void 0===s?void 0:s.isHidden),queryClient:n,key:e})}})},Ce=function(e){var n=e.comment,t=e.updateModal,o=(0,u.$G)("comments").t,i=xe(n.queryKey).mutateAsync,a=n.isHidden,r=o(a?"showComment":"hideComment"),c=(0,l.useCallback)((function(){t({loading:!0}),i({postId:n.postId,hide:!a,id:n.id}).then((function(e){if("hidePost"in e){var n,i,r,s;if(!(null===(n=e.hidePost)||void 0===n?void 0:n.ok))return void d.y.error((null===(s=e.hidePost)||void 0===s?void 0:s.error)||o("somethingWentWrong"),{itemClassName:g.Cj.bgLayer3});var l=!!(null===(i=e.hidePost)||void 0===i||null===(r=i.post)||void 0===r?void 0:r.isHidden);d.y.success(o(l?"hideSuccess":"showSuccess"),{itemClassName:g.Cj.bgLayer3})}else d.y.success(o(a?"showSuccess":"hideSuccess"),{itemClassName:g.Cj.bgLayer3});t({loading:!1,visible:!1})}))}),[t,i,n.postId,n.id,a,o]),m=(0,l.useCallback)((function(){t({visible:!0,variant:a?"info":"danger",confirmText:o(a?"confirmShowComment":"confirmHideComment"),confirmBtn:o(a?"showComment":"hideComment"),onConfirm:c})}),[t,c,a,o]);return(0,s.jsx)(pe.T,{onClick:m,children:r})},ye=function(e){var n=e.postId,t=e.queryClient,o=e.key,r=e.parentKey,s=e.topicId;t.invalidateQueries(o),t.invalidateQueries(["tabsStatus"]),r&&t.invalidateQueries(r);J({postId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.post.status=w.$4.Deleted,n.post.isHidden=!0,n},queryClient:t,key:o}),s&&t.setQueryData(["communitySolution",{topicId:s}],(function(e){var n;return(0,a.Z)((0,i.Z)({},e),{topic:(0,a.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.topic),{topLevelCommentCount:(null===e||void 0===e||null===(n=e.topic)||void 0===n?void 0:n.topLevelCommentCount)-1})})}))},ge=function(){return(0,W.soE)(Y.f6)},je=function(e){var n=e.postId,t=e.queryClient,o=e.key,r=e.status;J({postId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.post=(0,a.Z)((0,i.Z)({},n.post),{status:r,isHidden:!1}),n},queryClient:t,key:o})},be=function(){return(0,W.xxG)(Y.f6)},Ne=function(e){var n=e.comment,t=e.parentComment,o=e.topicId,i=e.updateModal,a=(0,u.$G)("comments").t,r=(0,F.NL)(),c=ge().mutateAsync,m=be().mutateAsync,f=n.status===w.$4.Deleted,v=a(f?"restore":"delete"),p=(0,l.useCallback)((function(){if(i({loading:!0}),f){if(!m)return;m({commentId:n.id}).then((function(e){var t,o,s;if(null===(t=e.approveComment)||void 0===t?void 0:t.ok){d.y.success(a("restoreSuccess"),{itemClassName:g.Cj.bgLayer3});var l=(null===(o=e.approveComment)||void 0===o||null===(s=o.post)||void 0===s?void 0:s.status)||w.$4.All;je({postId:n.postId,queryClient:r,key:n.queryKey,status:l}),i({loading:!1,visible:!1})}else{var u;d.y.error(!(null===(u=e.approveComment)||void 0===u?void 0:u.error)||a("deleteCommentError"),{itemClassName:g.Cj.bgLayer3})}}))}else c({commentId:n.id}).then((function(e){var s,l;(null===(s=e.deleteComment)||void 0===s?void 0:s.ok)?(d.y.success(a("deleteSuccess"),{itemClassName:g.Cj.bgLayer3}),ye({postId:n.postId,queryClient:r,key:n.queryKey,parentKey:null===t||void 0===t?void 0:t.queryKey,topicId:o}),i({loading:!1,visible:!1})):d.y.error(!(null===(l=e.deleteComment)||void 0===l?void 0:l.error)||a("deleteCommentError"),{itemClassName:g.Cj.bgLayer3})}))}),[i,c,m,r,f,n.id,n.postId,n.queryKey,null===t||void 0===t?void 0:t.queryKey,o,a]),h=(0,l.useCallback)((function(){i({visible:!0,variant:f?"info":"danger",confirmText:a(f?"confirmRestoreComment":"confirmDeleteComment"),confirmBtn:a(f?"restore":"delete"),onConfirm:p})}),[i,p,f,a]);return(0,s.jsx)(pe.T,{onClick:h,children:v})},we=function(e){var n=e.comment,t=e.updateModal,o=(0,u.$G)("comments").t,r=(0,F.NL)(),c=he().mutateAsync,m=n.pinned,f=o(m?"unpin":"pin"),v=(0,l.useCallback)((function(){t({loading:!0}),c&&c({commentId:n.id,pinned:!m}).then((function(e){var s,l,u,c,m,f;if(null===(s=e.togglePinComment)||void 0===s?void 0:s.ok){var v=!!(null===(l=e.togglePinComment)||void 0===l||null===(u=l.comment)||void 0===u?void 0:u.pinned),p=(null===(c=e.togglePinComment)||void 0===c||null===(m=c.comment)||void 0===m||null===(f=m.pinnedBy)||void 0===f?void 0:f.username)||"";d.y.success(o(v?"pinSuccess":"unpinSuccess"),{itemClassName:g.Cj.bgLayer3}),function(e){var n=e.commentId,t=e.pinned,o=e.pinnedByUsername,r=e.queryClient,s=e.key;J({commentId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.pinned=t,n.pinnedBy=(0,a.Z)((0,i.Z)({},n.pinnedBy),{username:o}),n},queryClient:r,key:s})}({commentId:n.id,pinned:v,pinnedByUsername:p,queryClient:r,key:n.queryKey}),t({loading:!1,visible:!1})}else{var h;d.y.error((null===(h=e.togglePinComment)||void 0===h?void 0:h.error)||o("somethingWentWrong"),{itemClassName:g.Cj.bgLayer3})}}))}),[t,c,r,m,n.id,n.queryKey,o]),p=(0,l.useCallback)((function(){t({visible:!0,variant:"info",confirmText:o(m?"confirmUnpinComment":"confirmPinComment"),confirmBtn:o(m?"unpin":"pin"),onConfirm:v})}),[t,v,m,o]);return(0,s.jsx)(pe.T,{onClick:p,children:f})},Ie=function(e){var n;return(0,p.yI)((n={},(0,b.Z)(n,"opacity-1",!e.isHidden&&e.status!==w.$4.Deleted),(0,b.Z)(n,"opacity-40",e.isHidden||e.status===w.$4.Deleted),n))},ke=function(e){var n=e.comment,t=e.updateConfirmModal,o=e.updateReportModal,i=e.isPinnable,a=void 0===i||i,r=(0,u.$G)("comments").t,c=(0,S.r)().isSignedIn,m=(0,l.useCallback)((function(){c?o({visible:!0,comment:n}):d.y.error(r("common:loginRequired"))}),[c,o,n,r]),f=$().state.isModerator;return!f&&n.isOwnPost?null:(0,s.jsxs)(pe.l,{btnClassName:(0,p.yI)("w-4.5 h-4.5",Ie(n)),iconClassName:"w-4.5 h-4.5",placement:(0,T.tq)()?"top-left":"top",children:[f&&a&&(0,s.jsx)(we,{comment:n,updateModal:t}),f&&(0,s.jsx)(Ce,{comment:n,updateModal:t}),!n.isOwnPost&&(0,s.jsx)(pe.T,{onClick:m,children:r("report")}),f&&(0,s.jsx)(Ne,{comment:n,updateModal:t})]})},Se=t(19913),Ze=t(38488),Te=function(e){var n=e.status,t=e.isHidden,o=(0,u.$G)("comments").t,i=$().state.isModerator,a=t?o("hidden"):n;return i?(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.label4,"text-xs capitalize"),children:a}):null},qe=t(25132),Re=t(7367),Le=function(e){var n=e.comment,t=e.parentComment,o=e.topicId,i=e.updateModal,a=(0,u.$G)("comments").t,r=(0,F.NL)(),c=ge().mutateAsync,m=be().mutateAsync,f=n.status===w.$4.Deleted,v=(0,l.useMemo)((function(){return f?qe.H:Re.j}),[f]),h=(0,l.useCallback)((function(){if(i({loading:!0}),f){if(!m)return;m({commentId:n.id}).then((function(e){var t,o,s;if(null===(t=e.approveComment)||void 0===t?void 0:t.ok){d.y.success(a("restoreSuccess"),{itemClassName:g.Cj.bgLayer3});var l=(null===(o=e.approveComment)||void 0===o||null===(s=o.post)||void 0===s?void 0:s.status)||w.$4.All;je({postId:n.postId,queryClient:r,key:n.queryKey,status:l}),i({loading:!1,visible:!1})}else{var u;d.y.error(!(null===(u=e.approveComment)||void 0===u?void 0:u.error)||a("deleteCommentError"),{itemClassName:g.Cj.bgLayer3})}}))}else c({commentId:n.id}).then((function(e){var s,l;(null===(s=e.deleteComment)||void 0===s?void 0:s.ok)?(d.y.success(a("deleteSuccess"),{itemClassName:g.Cj.bgLayer3}),ye({postId:n.postId,queryClient:r,key:n.queryKey,parentKey:null===t||void 0===t?void 0:t.queryKey,topicId:o}),i({loading:!1,visible:!1})):d.y.error(!(null===(l=e.deleteComment)||void 0===l?void 0:l.error)||a("deleteCommentError"),{itemClassName:g.Cj.bgLayer3})}))}),[i,c,m,r,f,n.id,n.postId,n.queryKey,null===t||void 0===t?void 0:t.queryKey,o,a]),x=a(f?"restore":"delete"),C=(0,l.useCallback)((function(){i({visible:!0,variant:f?"info":"danger",confirmText:a(f?"confirmRestoreComment":"confirmDeleteComment"),confirmBtn:a(f?"restore":"delete"),onConfirm:h})}),[i,h,f,a]);return(0,s.jsx)(z.E,{onClick:C,icon:v,label:x,labelClassName:(0,p.yI)(g.M$.label1Group),iconClassName:(0,p.yI)(g.M$.labelGrey7Group,"h-4.5 w-4.5"),className:(0,p.yI)("group cursor-pointer gap-1")})},Be=t(24744),De=/\[\@[^\]]+\]\(\/([^/]+)\)/g,_e=function(e){var n=e.matchAll(De),t=new Set,o=!0,i=!1,a=void 0;try{for(var r,s=n[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var l=r.value;(null===l||void 0===l?void 0:l[1])&&t.add(l[1])}}catch(u){i=!0,a=u}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return Array.from(t)},Me=t(29815),He=function(e){var n=e.comment,t=e.queryClient,o=e.key,r=e.parentComment,s=e.questionSlug,l=e.topicId;s&&t.invalidateQueries(W.YyS.getKey({titleSlug:s}));var u=o[0]===K.QuestionComment?K.QuestionComment:K.Reply;if(u===K.QuestionComment){var c=o[1];[oe.f.Best,oe.f.MostVotes,oe.f.NewestToOldest,oe.f.OldestToNewest].filter((function(e){return e!==c.orderBy})).forEach((function(e){t.invalidateQueries([K.QuestionComment,(0,a.Z)((0,i.Z)({},c),{orderBy:e})])}))}var d=[o[0],(0,a.Z)((0,i.Z)({},o[1]),{pageNo:1})],m=u===K.QuestionComment?d:o;t.setQueryData(m,(function(e){var t,o,a=e?u===K.QuestionComment?null===e||void 0===e||null===(t=e.topicComments)||void 0===t?void 0:t.data:null===e||void 0===e?void 0:e.commentReplies:[],r=[n].concat((0,Me.Z)(a)),s=u===K.QuestionComment?{topicComments:{data:r,totalNum:((null===e||void 0===e||null===(o=e.topicComments)||void 0===o?void 0:o.totalNum)||0)+1}}:{commentReplies:r};return(0,i.Z)({},s)})),r&&t.setQueryData(r.queryKey,(function(e){var n,t=(e?null===e||void 0===e||null===(n=e.topicComments)||void 0===n?void 0:n.data:[]).map((function(e){return e.id===r.id?(0,a.Z)((0,i.Z)({},e),{numChildren:e.numChildren+1}):e})),o=(0,a.Z)((0,i.Z)({},e),{topicComments:(0,a.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.topicComments),{data:t})});return(0,i.Z)({},o)})),l&&t.setQueryData(["communitySolution",{topicId:l}],(function(e){var n;return(0,a.Z)((0,i.Z)({},e),{topic:(0,a.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.topic),{topLevelCommentCount:(null===e||void 0===e||null===(n=e.topic)||void 0===n?void 0:n.topLevelCommentCount)+1})})}))},Ae=function(){return(0,W.sHn)(Y.f6)},Ee=function(e){var n=e.commentId,t=e.content,o=e.queryClient,r=e.key;J({commentId:n,changeComment:function(e){var n=(0,i.Z)({},e);return n.post=(0,a.Z)((0,i.Z)({},n.post),{content:t}),n},queryClient:o,key:r})},ze=function(){return(0,W.oRU)(Y.f6)},Pe=function(){return!1},Oe=function(e){return(0,Be.e9)(e)},Ge=function(e){var n=e.queryKey,t=e.parentComment,i=e.existingComment,a=e.initialContent,s=e.initialIntentionTag,c=e.saveDraft,m=e.setPageNo,f=(0,u.$G)("comments").t,v=(0,l.useState)((null===i||void 0===i?void 0:i.content)||a||""),p=v[0],h=v[1],x=(0,l.useState)(s||void 0),C=x[0],y=x[1],j=(0,l.useState)(!1),b=j[0],N=j[1],w=$(),I=w.state,k=I.topicId,S=I.questionSlug,Z=w.dispatch,T=Number(k),q=(0,F.NL)(),R=Ae().mutateAsync,L=ze().mutateAsync,B=(0,l.useCallback)((function(e){h(e),c&&Z({type:"content",payload:e})}),[c,Z]),D=(0,l.useCallback)((function(e){y(e),c&&Z({type:"intentionTag",payload:e})}),[c,Z]),_=function(){var e=(0,o.Z)((function(){var e;return(0,r.__generator)(this,(function(o){return b?[2,{ok:!1}]:Pe(p)?(d.y.error(f("tooShort"),{itemClassName:g.Cj.bgLayer3}),[2,{ok:!1}]):(N(!0),e=(null===t||void 0===t?void 0:t.id)||0,[2,R({topicId:T,intentionTagSlug:C,parentCommentId:e,content:Oe(p),mentionedUserSlugs:_e(p)}).then((function(e){var o,i,a;if(!(null===e||void 0===e||null===(o=e.createComment)||void 0===o?void 0:o.ok)||!(null===e||void 0===e||null===(i=e.createComment)||void 0===i?void 0:i.comment))return d.y.error((null===e||void 0===e||null===(a=e.createComment)||void 0===a?void 0:a.error)||f("somethingWentWrong"),{itemClassName:g.Cj.bgLayer3}),{ok:!1};var r=e.createComment.comment;return d.y.success(f("postSuccess"),{itemClassName:g.Cj.bgLayer3}),He({comment:r,queryClient:q,key:n,parentComment:t,questionSlug:S,topicId:T}),B(""),D(void 0),m&&m(1),{ok:!0}})).finally((function(){return N(!1)}))])}))}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.Z)((function(){var e;return(0,r.__generator)(this,(function(t){return b?[2,{ok:!1}]:Pe(p)?(d.y.error(f("tooShort"),{itemClassName:g.Cj.bgLayer3}),[2,{ok:!1}]):(N(!0),e=(null===i||void 0===i?void 0:i.id)||0,[2,L({commentId:e,content:p,mentionedUserSlugs:_e(p)}).then((function(t){var o,i,a,r,s;if(N(!1),!(null===t||void 0===t||null===(o=t.updateComment)||void 0===o?void 0:o.ok)||!(null===t||void 0===t||null===(i=t.updateComment)||void 0===i?void 0:i.comment))return d.y.error((null===t||void 0===t||null===(s=t.updateComment)||void 0===s?void 0:s.error)||f("somethingWentWrong"),{itemClassName:g.Cj.bgLayer3}),{ok:!1};var l=(null===(a=t.updateComment.comment)||void 0===a||null===(r=a.post)||void 0===r?void 0:r.content)||"";return Ee({content:l,commentId:e,queryClient:q,key:n}),{ok:!0}}))])}))}));return function(){return e.apply(this,arguments)}}();return{onSave:_,onEdit:M,isSaving:b,value:p,onCommentChange:B,intentionTag:C,onIntentionTagChange:D}},Ve=t(99534),Ue=t(16496),$e=t.n(Ue);var Ke=t(43822),Qe=t(75117);var Fe,We,Ye,Je=t(29732),Xe=t(23874),en=function(e,n){return(0,W.YQp)(Y.f6,{usernamePrefix:e,topicId:n},{enabled:!!n&&!!e.trim(),select:function(e){return(0,Je.Z)(e.topicUsers).map((function(e){return{username:e.username,name:e.profile.realName||e.username,userAvatar:e.profile.userAvatar||"",userSlug:e.profile.userSlug||""}}))}})},nn=t(47306),tn=function(e){var n=e.user,t=e.active,o=e.onSelect,i=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e;t&&(null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),[t]),(0,s.jsxs)("div",{ref:i,onClick:function(){o({insertedContent:"[@".concat(n.name,"](").concat(D.Hb.profile(n.userSlug),")")})},className:(0,p.yI)(g.Cj.fill3Hover,(0,b.Z)({},g.Cj.fill3,t),"flex h-12 cursor-pointer items-center rounded-[5px] px-2 py-1.5"),children:[(0,s.jsx)(nn.q,{className:"h-9 w-9",src:n.userAvatar,alt:"avatar"}),(0,s.jsxs)("div",{className:"ml-2",children:[(0,s.jsx)("h3",{children:n.name}),(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.label4,"mt-0.5 text-xs font-medium"),children:n.userSlug})]})]})},on=function(e){var n=e.users,t=e.selectIndex,o=e.onSelect;return(0,s.jsx)("div",{className:"max-h-[250px] space-y-1 overflow-auto px-2",children:n.map((function(e,n){return(0,s.jsx)(tn,{user:e,active:t===n,onSelect:o},e.userSlug)}))})},an=function(e){var n=e.users,t=e.selectIndex,o=e.onSelect,i=e.isFetching,a=e.keyword;return i||!a.trim()||0===n.length?null:(0,s.jsx)(on,{users:n,selectIndex:t,onSelect:o})},rn=Qe.ob,sn=(0,l.memo)((function(e){var n=e.onBlur,t=e.onSelect,o=e.topicId,i=function(e){var n=e.onTriggered,t=e.disableClick,o=e.disableTouch,i=e.disableKeys,a=e.allowAnyKey,r=e.triggerKeys,s=(0,l.useRef)(null),u=(0,l.useCallback)((function(e){a?n(e):r?r.includes(e.key)&&n(e):"Escape"===e.key&&n(e)}),[a,r,n]),c=(0,l.useCallback)((function(e){s&&s.current&&(s.current.contains(e.target)||null===n||void 0===n||n(e))}),[s,n]),d=(0,l.useMemo)((function(){return[[t,"click",c],[o,"touchstart",c],[i,"keyup",u]]}),[t,o,i,c,u]);return(0,l.useEffect)((function(){return d.forEach((function(e){var n=(0,C.Z)(e,3),t=n[0],o=n[1],i=n[2];t||document.addEventListener(o,i)})),function(){d.forEach((function(e){var n=(0,C.Z)(e,3),t=n[0],o=n[1],i=n[2];t||document.removeEventListener(o,i)}))}}),[d]),s}({onTriggered:n}),a=function(){var e=(0,l.useRef)(null);return(0,k.L)((function(){setTimeout((function(){e.current&&e.current.focus()}),100)}),[]),e}(),r=(0,l.useState)(0),u=r[0],c=r[1],d=(0,l.useState)(0),m=d[0],f=d[1],v=function(e){c(0),f(e)},h=(0,l.useState)(""),x=h[0],y=h[1],j=en(x,o||0),b=j.data,N=void 0===b?[]:b,w=j.isFetching,I=function(e,n){var t=n.enabled,o=void 0===t||t;return(0,Xe.iSL)(Y.f6,{filters:{searchKeywords:e,sortOrder:null,orderBy:null}},{enabled:!!e&&o,select:function(e){return(0,Je.Z)(e.problems.questions).map((function(e){return{frontendQuestionId:e.frontendQuestionId,title:e.titleCn||e.title,titleSlug:e.titleSlug,difficulty:e.difficulty}}))}})}(x,{enabled:rn}),S=I.data,Z=void 0===S?[]:S,T=0===m?N:Z,q=T.length,R=function(e){var n=e.onEnter,t=e.onArrowDown,o=e.onArrowUp,i=e.onEscape,a=e.onTab,r=e.onBackSpace;return(0,l.useCallback)((function(e){var s=e.key;switch(!0){case"Enter"===s:return e.preventDefault(),void n();case"ArrowDown"===s:return e.preventDefault(),void t();case"ArrowUp"===s:return e.preventDefault(),void o();case"Escape"===s:return e.preventDefault(),void i();case"Tab"===s:return void a();case"Backspace"===s:return void r(e.currentTarget.value);default:return}}),[n,t,o,i,a,r])}({onEscape:n,onEnter:function(){var e=T[u];t("userSlug"in e?{insertedContent:"[@".concat(e.name,"](").concat(D.Hb.profile(e.userSlug),")")}:{insertedContent:"[".concat(e.frontendQuestionId,". ").concat(e.title,"](").concat(D.Hb.questionDetail(e.titleSlug),")")})},onArrowUp:function(){c((function(e){return(e+q-1)%q}))},onArrowDown:function(){c((function(e){return(e+1)%q}))},onTab:function(){v((function(e){return(e+1)%2}))},onBackSpace:function(e){e||n()}});return(0,s.jsxs)("div",{ref:i,className:(0,p.yI)("z-base-2 flex w-[250px] flex-col gap-2 rounded-lg py-2",g.eq.dropdown,g.Cj.bgLayer3),children:[(0,s.jsx)("div",{className:"rounded-[5px] px-2",children:(0,s.jsx)(Ke.I,{ref:a,onKeyDown:R,value:x,onChange:function(e){return y(e.target.value)}})}),(0,s.jsx)(an,{users:N,selectIndex:u,onSelect:t,activeIndex:m,setActiveIndex:v,problems:Z,isFetching:w,keyword:x})]})})),ln=function(e){var n=e.mentionInfo,t=e.hideSelf,o=e.onMentionSelect,i=e.topicId,a=(0,l.useRef)(null),r=(0,l.useRef)(null),u=(0,l.useRef)(!1),c=n.top,d=n.left,m=n.right,f=n.visible,v=(0,l.useCallback)((function(e){var n=e.insertedContent;o(n),t()}),[t,o]);return(0,l.useEffect)((function(){var e=a.current;f&&e&&(e.style.top="".concat(c,"px"),e.style.left=void 0!==d?"".concat(d,"px"):"",e.style.right=void 0!==m?"".concat(m,"px"):"")}),[c,d,m,f]),(0,l.useEffect)((function(){var e=u.current;f&&a.current&&r.current&&!e&&r.current.focus(),u.current=f}),[f]),(0,s.jsx)("div",{ref:a,className:(0,p.yI)("z-base-1 absolute box-content rounded-lg",{block:f,hidden:!f}),children:f&&(0,s.jsx)(sn,{onBlur:t,onSelect:v,topicId:i})})};!function(e){e.Full="full",e.Slim="slim"}(Fe||(Fe={})),function(e){e.InlineCode="code-inline",e.CodeBlock="code",e.Link="link",e.BulletList="list",e.NumberList="number-list",e.Mention="@",e.Problem="#"}(We||(We={})),function(e){e.User="user",e.Problem="problem"}(Ye||(Ye={}));var un,cn=t(54042),dn=t(39940),mn=t(67962),fn=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{d:"M11.27 6.799l.146-.438c.075-.259.178-.437.308-.534.14-.108.345-.06.615.145.065.054.124.114.178.179a.45.45 0 01.114.226.976.976 0 01.032.373 2.21 2.21 0 01-.13.535l-1.182 3.434c-.054.151-.043.28.032.389a.399.399 0 00.308.146c.087 0 .232-.081.438-.243.205-.173.41-.405.615-.697.216-.292.405-.637.567-1.037a3.63 3.63 0 00.243-1.344c0-.519-.108-1-.324-1.442a3.458 3.458 0 00-.907-1.15 4.033 4.033 0 00-1.345-.778 4.76 4.76 0 00-1.684-.292 4.55 4.55 0 00-1.766.373 5.343 5.343 0 00-2.77 2.738c-.292.659-.438 1.393-.438 2.203 0 .691.13 1.296.389 1.814.26.519.616.95 1.07 1.296.453.335.982.589 1.587.762a7.555 7.555 0 001.96.243 9.97 9.97 0 001.328-.081c.4-.054.783-.151 1.15-.292a5.269 5.269 0 001.07-.6c.345-.258.707-.582 1.085-.971.076-.108.162-.162.26-.162.107-.011.21.01.307.065a.567.567 0 01.243.21.5.5 0 01.13.276.857.857 0 01-.081.55c-.076.162-.26.378-.551.648-.292.27-.61.524-.956.762a6.538 6.538 0 01-1.118.632c-.4.172-.837.307-1.312.405a7.016 7.016 0 01-1.555.162 8.817 8.817 0 01-2.527-.324 6.147 6.147 0 01-2.122-1.021 5.098 5.098 0 01-1.442-1.814c-.357-.735-.535-1.61-.535-2.625 0-1.09.19-2.057.567-2.9.389-.853.891-1.566 1.507-2.138a6.371 6.371 0 012.09-1.328A6.646 6.646 0 019.26 2.7c.875 0 1.674.13 2.398.389.734.259 1.36.62 1.879 1.085.518.465.918 1.02 1.199 1.669.291.648.437 1.36.437 2.138 0 .627-.119 1.237-.356 1.83a5.638 5.638 0 01-.94 1.556c-.389.454-.826.82-1.312 1.102-.486.27-.977.405-1.474.405-.378 0-.675-.087-.891-.26-.216-.172-.378-.437-.486-.793-.346.28-.637.496-.875.648-.238.15-.545.221-.923.21-.443-.01-.8-.102-1.07-.275a1.905 1.905 0 01-.631-.648 2.547 2.547 0 01-.308-.859 5.625 5.625 0 01-.081-.923c0-.465.092-.967.275-1.507.195-.55.46-1.053.794-1.506a4.519 4.519 0 011.247-1.15 2.928 2.928 0 011.62-.47c.227 0 .422.037.584.113.172.076.313.184.42.324.12.13.217.286.292.47.076.173.146.356.211.55zm-2.657 4.374c.324 0 .637-.12.94-.357.313-.248.578-.723.794-1.425.14-.432.243-.746.307-.94.065-.205.103-.373.114-.502.01-.205-.07-.389-.243-.551-.173-.173-.357-.26-.551-.26-.346 0-.659.087-.94.26-.27.173-.502.394-.696.664a3.53 3.53 0 00-.438.907 3.563 3.563 0 00-.178.972c0 .476.092.8.276.972.183.173.388.26.615.26z"})}))})),vn=t(46759),pn=t(60477),hn=t(87740),xn=t(62479),Cn=t(73792),yn=t(36258),gn=function(){return(0,W.ewH)(Y.f6,{},{select:function(e){var n=e.intentionTags;return n||[]}})},jn=(0,p.yI)("transition-colors cursor-pointer py-[5px] px-3 rounded-lg"),bn=function(e){var n=e.intentionTag,t=e.setIntentionTag,o=(0,u.$G)("comments").t,i=gn().data,a=$().dispatch;(0,l.useEffect)((function(){return i&&a({type:"setIntentionTags",payload:i})}),[a,i]);var r=(0,l.useMemo)((function(){return(null!==i&&void 0!==i?i:[]).map((function(e){return{value:e.slug,text:e.name}}))}),[i]),c=(0,l.useMemo)((function(){return r.find((function(e){return e.value===n}))}),[r,n]);return(0,s.jsx)("div",{className:"absolute top-0",children:(0,s.jsx)("div",{className:"relative flex items-center space-x-2",children:(0,s.jsx)(Cn.L,{selected:null===c||void 0===c?void 0:c.value,icon:(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.labelBlueStandard,"text-xs font-medium"),children:(0,s.jsx)(yn.h,{})}),iconClassName:"w-4 h-4 ml-0.5",itemsClassName:(0,p.yI)(g.Cj.bgLayer3,"left-0 top-[22px] text-md"),itemClassName:(0,p.yI)("font-normal",g.Cj.label2),itemSelectedClassName:(0,p.yI)("font-medium",g.Cj.label1),btnClassName:(0,p.yI)(g.Cj.bgTransparent,g.Cj.bgTransparentActive,g.Cj.bgTransparentHover,g.Cj.labelBlueStandard,"p-0"),setSelected:function(e){t&&t(e)},items:r,btnText:(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.labelBlueStandard,"text-xs font-medium"),children:c?null===c||void 0===c?void 0:c.text:o("chooseAType")})})})})},Nn=function(e){var n=e.rule,t=e.onClick,o=e.icon,i=e.className,a=(0,l.useCallback)((function(){return t(n)}),[t,n]);return(0,s.jsx)("div",{className:(0,p.yI)("flex cursor-pointer items-center rounded-[5px] p-1 text-base",g.Cj.labelGrey7,g.Cj.fill4Hover,i),onClick:a,children:o})},wn=(0,l.forwardRef)((function(e,n){var t,c,d,m=e.onInsertRule,f=e.onCancel,x=e.className,y=e.placeholder,j=e.onSave,N=e.intentionTag,w=e.onIntentionTagChange,I=e.onSaveText,k=e.disabled,S=e.onChange,Z=e.value,T=e.defaultValue,q=(0,Ve.Z)(e,["onInsertRule","onCancel","className","placeholder","onSave","intentionTag","onIntentionTagChange","onSaveText","disabled","onChange","value","defaultValue"]),R=(0,u.$G)("comments").t,L=(0,l.useRef)(null),B=$().state,D=B.layoutType,_=B.questionSlug,M=(0,C.Z)((0,hn.O)(!1),2),H=M[0],A=M[1],E=(0,l.useCallback)((function(){_&&!H&&h.d.qdPreviewCommentClick({qd_version:(0,v.in)(),qd_question_slug:_,qd_comment_pos:ie(D)}),A.toggle()}),[A,D,_,H]),z=[O.Dk.Discuss,O.Dk.Description].includes(D),P=z&&!H&&!T,G=(0,p.yI)("w-full resize-none bg-transparent p-4 text-md outline-0 outline-none dark:bg-transparent min-h-[80px]",g.Cj.placeholderLabel4,x),V=(0,p.yI)({hidden:H,inherit:!H}),U=k||0===(null===Z||void 0===Z?void 0:Z.trim().length),K=(0,l.useCallback)((0,o.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,j()];case 1:return e.sent(),A.off(),[2]}}))})),[j,A]);return(0,s.jsxs)("div",{className:(0,p.yI)("flex w-full flex-col rounded-[13px]",g.Cj.bgLayer2,g.eq.card),ref:L,children:[H&&(0,s.jsx)("div",{className:(0,p.yI)("min-h-[80px]",G),children:(0,s.jsx)(vn.J,{content:Z})}),(0,s.jsx)(cn.Z,(0,a.Z)((0,i.Z)({disabled:k,value:Z,onChange:S},q,xn.g),{ref:n,placeholder:y||R("typeCommentHere"),className:(0,p.yI)(G,V)})),(0,s.jsxs)("div",{className:"relative box-content flex h-8 items-end p-4",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col",children:[z&&!H&&P&&(0,s.jsx)(bn,{intentionTag:N,setIntentionTag:w}),(0,s.jsxs)("div",{className:(0,p.yI)("flex h-8 items-end gap-2",V),children:[(0,s.jsx)(Nn,{onClick:m,icon:(0,s.jsx)(dn.w,{}),rule:We.InlineCode}),(0,s.jsx)(Nn,{onClick:m,icon:(0,s.jsx)(mn.J,{}),rule:We.Link}),(0,s.jsx)(Nn,{onClick:m,icon:(0,s.jsx)(fn,{}),rule:We.Mention})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(pn.z,{disabled:U,className:(0,p.yI)(jn,g.Cj.label3,(t={},(0,b.Z)(t,g.Cj.label2Hover,!U),(0,b.Z)(t,(0,p.yI)(g.Cj.labelBlueStandard,g.Cj.labelBlue3Hover),H),(0,b.Z)(t,"cursor-not-allowed",U),t),"bg-transparent hover:!bg-transparent dark:bg-transparent"),onClick:E,children:R(H?"editor":"preview")}),f&&(0,s.jsx)(pn.z,{disabled:k,onClick:f,className:(0,p.yI)(jn,g.Cj.fill2,g.Cj.fill3Hover,"text-label-1 dark:text-white",(c={},(0,b.Z)(c,"opacity-40",k),(0,b.Z)(c,"opacty-100",!k),c)),children:R("cancel")}),(0,s.jsx)(pn.z,{disabled:k||0===(null===Z||void 0===Z?void 0:Z.trim().length),onClick:K,className:(0,p.yI)(jn,g.Cj.bgGreenStandard,g.Cj.bgGreen3Hover,g.Cj.labelWhite,(d={},(0,b.Z)(d,"opacity-40",k),(0,b.Z)(d,"opacty-100",!k),d)),children:I||R("comment")})]})]})]})})),In=t(32180),kn=(0,p.yI)("transition-colors cursor-pointer py-[4px] px-3 rounded-[20px]"),Sn=(0,l.forwardRef)((function(e,n){var t,o,r=e.onCancel,l=e.className,c=e.placeholder,d=e.onSave,m=e.onChange,f=e.onSaveText,v=e.disabled,h=e.value,x=(0,Ve.Z)(e,["onCancel","className","placeholder","onSave","onChange","onSaveText","disabled","value"]),C=(0,u.$G)("comments").t,y=(0,In.Z)(x,["intentionTag","onInsertRule","onIntentionTagChange"]);return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)(cn.Z,(0,a.Z)((0,i.Z)({},y,xn.g),{ref:n,disabled:v,value:h,onChange:m,placeholder:c||C("typeCommentHere"),className:(0,p.yI)("w-full resize-none rounded-[13px] bg-transparent p-2.5 text-sm outline-none dark:bg-transparent",g.Cj.bgLayer2,g.eq.card,g.Cj.placeholderLabel4,l),rows:1}))}),(0,s.jsx)("div",{className:"ml-2 mt-2 flex",children:(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-end space-x-4",children:[(0,s.jsx)(pn.z,{onClick:r,disabled:v,className:(0,p.yI)(kn,g.Cj.fill3,g.Cj.label2,(t={},(0,b.Z)(t,"opacity-40",v),(0,b.Z)(t,"opacty-100",!v),t)),children:C("cancel")}),(0,s.jsx)(pn.z,{onClick:d,disabled:v||0===(null===h||void 0===h?void 0:h.trim().length),className:(0,p.yI)(kn,g.Cj.bgGreenStandard,g.Cj.bgGreen3Hover,g.Cj.labelWhite,(o={},(0,b.Z)(o,"opacity-40",v),(0,b.Z)(o,"opacty-100",!v),o)),children:f||C("comment")})]})})]})})),Zn=t(61757),Tn=new Map([[We.InlineCode,function(e){return"`".concat(e,"`")}],[We.CodeBlock,function(e){return"```".concat(e,"```")}],[We.Link,function(e){return"[".concat(e,"](").concat(e,")")}]]),qn=function(e){var n=e.rule,t=e.textareaEle,o=e.defaultTemplate,i=Zn.Mf(t),a=o;if(i&&function(e){return!!Tn.has(e)}(n)){var r=function(e){return Tn.get(e)}(n);a=r?r(i):o}Zn.$T(t,a)},Rn=function(e){var n=e.className,t=e.variation,i=void 0===t?Fe.Full:t,a=e.disabled,c=void 0!==a&&a,d=e.value,m=e.onSave,f=e.onSaveText,v=e.topicId,p=e.placeholder,h=e.defaultValue,x=e.innerRef,C=e.onCancel,y=e.intentionTag,g=e.onIntentionTagChange,j=(0,Ve.Z)(e,["className","variation","disabled","value","onSave","onSaveText","topicId","placeholder","defaultValue","innerRef","onCancel","intentionTag","onIntentionTagChange"]),b=(0,l.useCallback)((function(e){g&&g(e)}),[g]),N=(0,u.$G)("comments").t,w=(0,l.useState)({top:0,left:0,visible:!1}),I=w[0],k=w[1],S=x,Z=(0,l.useRef)((h||"").length),T=(0,l.useCallback)((function(e){switch(e){case We.InlineCode:return" `".concat(N("mdRules.inlineCode"),"your inline code...`");case We.CodeBlock:return"\n```\n".concat(N("mdRules.codeBlock"),"\n```\n");case We.Link:return"[".concat(N("mdRules.link"),"](").concat(N("mdRules.href"),")");case We.Mention:return" @";default:return""}}),[N]),q=function(){var e=S.current;e&&(Z.current=e.selectionEnd)},R=function(){k({visible:!1,top:0,left:0})},L=$().state.containerDom,B=function(){var e=S.current;if(e&&L){var n=$e()(e,Z.current),t=n.top,o=n.left,i=o+250+5+16>L.clientWidth;k(i?{top:t+20,right:0,visible:!0}:{top:t-5,left:o+5,visible:!0})}},D=function(){var e=S.current;e&&(e.focus(),e.selectionEnd=Z.current)},_=function(e){switch(e){case Fe.Full:return wn;case Fe.Slim:return Sn;default:return wn}}(i);return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(_,{value:d,disabled:c,onInsertRule:function(e){var n=S.current;if(n){var t=T(e);qn({rule:e,textareaEle:n,defaultTemplate:t}),e===We.Mention?setTimeout((function(){return B()}),0):D()}},className:n,ref:S,placeholder:p,onChange:function(e){!function(e){j.onChange(e)}(e.currentTarget.value)},onFocus:function(){R()},onBlur:function(){q()},innerRef:x,onKeyDown:function(e){var n=e.key,t=e.metaKey;setTimeout((0,o.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:switch(q(),n){case We.Mention:return[3,1];case"Enter":return[3,2]}return[3,4];case 1:return B(),[3,5];case 2:return t?[4,m()]:[3,5];case 3:return e.sent(),[3,5];case 4:return I.visible&&R(),[3,5];case 5:return[2]}}))})),18)},defaultValue:h,onCancel:C,onSave:m,onSaveText:f,intentionTag:y,onIntentionTagChange:b}),(0,s.jsx)(ln,{mentionInfo:I,topicId:v,hideSelf:function(){R(),D()},onMentionSelect:function(e){var n,t,o=S.current;o&&(o.selectionStart=o.selectionEnd-1,n=e,t=o,Zn.$T(t,n))}})]})},Ln=function(e){return(0,s.jsx)("div",{children:(0,s.jsx)(Rn,(0,i.Z)({},e))})},Bn=t(111),Dn=t(76831),_n=function(e){var n=e.content,t=(0,u.$G)("comments").t,o=(0,l.useState)(!1),i=o[0],a=o[1],r=(0,l.useState)(null),c=r[0],d=r[1],m=(0,l.useState)(!1),f=m[0],v=m[1];(0,k.L)((function(){setTimeout((function(){v(((null===c||void 0===c?void 0:c.scrollHeight)||0)>=140)}),1)}),[c,n]);var h,x,C=(0,l.useMemo)((function(){return f&&!i}),[f,i]),y=(0,l.useCallback)((function(){v(((null===c||void 0===c?void 0:c.scrollHeight)||0)>=140)}),[null===c||void 0===c?void 0:c.scrollHeight]),j=(0,l.useMemo)((function(){return(0,Bn.Z)(y,250)}),[y]),N=(0,Dn.a)(c).width;return(0,l.useEffect)((function(){N&&j()}),[N,j]),(0,s.jsx)("div",{className:"flex flex-col items-start",children:(0,s.jsxs)("div",{className:(0,p.yI)("relative w-full",(h={},(0,b.Z)(h,"overflow-hidden",C),(0,b.Z)(h,"block",!C),(0,b.Z)(h,"max-h-[140px]",!i),(0,b.Z)(h,"max-h-full",i),h)),children:[(0,s.jsx)("div",{className:"px-2.5",ref:d,children:(0,s.jsx)(vn.J,{content:n})}),(0,s.jsx)("div",{className:(0,p.yI)("cursor-pointer",(x={},(0,b.Z)(x,"absolute top-0 flex h-full w-full items-end bg-gradient-to-t from-[#F2F2F2] dark:from-[#393939]",C),(0,b.Z)(x,"hidden",!C),x)),onClick:function(){return a(!0)},children:(0,s.jsx)("div",{className:(0,p.yI)("text-md flex w-full items-center justify-center",g.Cj.label2),children:t("readMore")})})]})})},Mn=function(e){return 1===e?oe.i6.Up:-1===e?oe.i6.Down:oe.i6.None},Hn=function(e){var n=e.commentId;return W.EcN.getKey({commentId:n})},An=function(e,n,t){if(!t)return n?e.slice(0,n):e;var o=e.findIndex((function(e){return e.id===t}));return e.slice(0,o+1)},En=function(e,n){var t=e.commentId,o=e.pageNo,r=e.numPerPage,s=e.upToReplyId,l=W.EcN.getKey({commentId:t});return(0,W.EcN)(Y.f6,{commentId:t},(0,a.Z)((0,i.Z)({},n),{select:function(e){var n=e.commentReplies||[];if(!(null===n||void 0===n?void 0:n.length))return{total:0,comments:[]};var t=n.map((function(e){var n,t,o,i,a,r,s,u,c,d,m;return{id:e.id,pinned:e.pinned||!1,content:(0,Be.pC)(e.post.content),pinnedBy:{username:(null===(n=e.pinnedBy)||void 0===n?void 0:n.username)||""},voteCount:e.post.voteCount,voteStatus:Mn(e.post.voteStatus||0),status:e.post.status,isHidden:e.post.isHidden||!1,postId:e.post.id,creationDate:e.post.creationDate||0,isDiscussAdmin:(null===(t=e.post.author)||void 0===t?void 0:t.isDiscussAdmin)||!1,isDiscussStaff:(null===(o=e.post.author)||void 0===o?void 0:o.isDiscussStaff)||!1,userAvatar:(null===(i=e.post.author)||void 0===i?void 0:i.profile.userAvatar)||"",username:(null===(a=e.post.author)||void 0===a?void 0:a.username)||"",isActive:(null===(r=e.post.author)||void 0===r?void 0:r.isActive)||!1,nameColor:(null===(s=e.post.author)||void 0===s?void 0:s.nameColor)||"",activeBadgeIcon:(null===(u=e.post.author)||void 0===u||null===(c=u.activeBadge)||void 0===c?void 0:c.icon)||"",activeBadgeName:(null===(d=e.post.author)||void 0===d||null===(m=d.activeBadge)||void 0===m?void 0:m.displayName)||"",queryKey:l,isOwnPost:e.post.isOwnPost||!1,numChildren:0,ipRegion:""}})),i=void 0!==r?r*(o||1):0;return{total:t.length,comments:An(t,i,s)}}}))},zn=t(82723),Pn=zn.E,On=zn.E,Gn=function(e){var n=e.comment;return(0,s.jsx)("div",{className:(0,p.yI)("ml-2"),children:(0,s.jsx)(Te,{status:n.status,isHidden:n.isHidden})})},Vn=zn.E,Un=zn.E,$n=function(e){var n,t;return{hiddenCls:(0,p.yI)((n={},(0,b.Z)(n,"opacity-1",!e.isHidden&&e.status!==w.$4.Deleted),(0,b.Z)(n,"opacity-40",e.isHidden||e.status===w.$4.Deleted),n)),authorCls:"text-base",CreatedAtCls:"",moreActionsHiddenCls:(0,p.yI)((t={},(0,b.Z)(t,"opacity-1",!e.isHidden&&e.status!==w.$4.Deleted),(0,b.Z)(t,"opacity-40",e.isHidden||e.status===w.$4.Deleted),t))}},Kn=function(e){var n;return(0,p.yI)((n={},(0,b.Z)(n,"opacity-1",!e.isHidden&&e.status!==w.$4.Deleted),(0,b.Z)(n,"opacity-40",e.isHidden||e.status===w.$4.Deleted),n))},Qn=function(e){var n,t,i,a=e.parentComment,m=e.comment,f=e.updateConfirmModal,x=e.updateReportModal,y=(0,u.$G)("comments").t,j=$(),T=j.state,_=T.highlightedCommentId,M=T.layoutType,H=T.isModerator,A=T.panelIsSmall,E=T.topicId,z=T.questionSlug,P=j.dispatch,O=_===m.id,G=(0,l.useRef)(null);(0,k.L)((function(){O&&G.current&&G.current.scrollIntoView()}),[O]),(0,k.L)((function(){if(_){var e=function(){return P({type:"highlightedCommentId",payload:void 0})};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[_,P]);var V=Hn({commentId:a.id}),U=Ge({queryKey:m.queryKey,existingComment:m}),K=U.value,Q=U.onEdit,F=U.onCommentChange,W=U.isSaving,Y=(0,l.useMemo)((function(){return"[@".concat(m.realName||m.username,"](").concat(D.Hb.profile((null===m||void 0===m?void 0:m.userSlug)||m.username),") ")}),[m.realName,m.username,m.userSlug]),J=Ge({queryKey:V,parentComment:a,initialContent:Y}),X=J.value,ne=J.onSave,te=J.onCommentChange,oe=J.isSaving,re=(0,l.useRef)(null),se=(0,l.useState)(!1),le=se[0],ce=se[1],me=(0,C.Z)(q(),2),fe=me[0],pe=me[1];(0,l.useEffect)((function(){fe(le?null:G.current),le&&Z(re.current)}),[fe,le]);var he=(0,l.useCallback)((0,o.Z)((function(){return(0,r.__generator)(this,(function(e){return[2,Q().then((function(e){var n=e.ok;return n&&ce(!1),{ok:n}}))]}))})),[Q]),xe=(0,l.useState)(!1),Ce=xe[0],ye=xe[1],ge=(0,l.useRef)(null);(0,l.useEffect)((function(){return Ce?Z(ge.current):void 0}),[Ce]);var je=(0,l.useCallback)((function(){return ce(!0)}),[]),be=(0,l.useCallback)((function(){return ce(!1)}),[]),Ne=(0,S.r)().isSignedIn,we=(0,l.useCallback)((function(){Ne?(ye((function(e){return!e})),!Ce&&z&&h.d.qdReplyCommentClick({qd_version:(0,v.in)(),qd_question_slug:z,qd_comment_pos:ie(M),qd_comment_type:ee.Reply})):d.y.error(y("common:loginRequired"))}),[Ne,y,z,Ce,M]),Ie=(0,l.useCallback)((function(){return ye(!1)}),[]),Se=En({commentId:a.id},{enabled:!0}).refetch,Ze=function(){var e=(0,o.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,ne()];case 1:return(e=n.sent()).ok&&(ye(!1),Se(),z&&h.d.qdSubmitCommentClick({qd_version:(0,v.in)(),qd_question_slug:z,qd_comment_pos:ie(M),qd_comment_type:ee.Reply})),[2,e]}}))}));return function(){return e.apply(this,arguments)}}(),qe=(0,l.useCallback)((function(){z&&h.d.qdShareCommentClick({qd_version:(0,v.in)(),qd_question_slug:z,qd_comment_pos:ie(M),qd_comment_type:ee.Reply})}),[z,M]),Re=Kn(m),Be=!A,De=!(m.status===w.$4.Deleted)&&(m.isOwnPost&&!H),_e=(0,c.U5)().data,Me=(null===_e||void 0===_e||null===(n=_e.userStatus)||void 0===n?void 0:n.name)||(null===_e||void 0===_e||null===(t=_e.userStatus)||void 0===t?void 0:t.username)||"",He=(null===_e||void 0===_e||null===(i=_e.userStatus)||void 0===i?void 0:i.avatar)||"",Ae="max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6",Ee=(0,I.v)(m.username),ze=$n(m).CreatedAtCls;return le?(0,s.jsxs)("div",{className:"flex w-full gap-2 px-3 pb-2 pt-4",children:[(0,s.jsx)(R.D,{userAvatar:m.userAvatar,username:m.username,imgClassName:Ae}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(Ln,{value:K,onSave:he,defaultValue:m.content,disabled:W,innerRef:re,topicId:E||0,onChange:F,onSaveText:String(y("edit")),onCancel:be,variation:Fe.Slim})})]}):(0,s.jsxs)("div",{className:"flex flex-col",ref:G,children:[(0,s.jsxs)("div",{className:(0,p.yI)("flex w-full px-3 pb-2 pt-4 transition-[background] duration-500",(0,b.Z)({},(0,p.yI)(g.Cj.bgBlue0,"rounded-lg"),O)),children:[(0,s.jsx)(R.D,{userAvatar:m.userAvatar,username:m.username,imgClassName:(0,p.yI)("mr-2",Ae,Re)}),(0,s.jsxs)("div",{className:"flex w-full min-w-0 flex-col",children:[(0,s.jsxs)("div",{className:(0,p.yI)("flex w-full flex-col gap-1 overflow-hidden rounded-[13px]",g.Cj.label2,g.Cj.fill3),children:[(0,s.jsxs)("div",{className:(0,p.yI)("mt-2.5 flex w-full items-center gap-2 px-2.5",Re),children:[(0,s.jsx)(L.S,{username:m.username,badgeIcon:m.activeBadgeIcon,badgeName:m.activeBadgeName,badgeClassName:(0,p.yI)("ml-1"),realName:m.realName,reputation:m.reputation,userClassName:(0,p.yI)(g.Cj.label1,"text-xs font-medium")}),(0,s.jsx)("div",{children:(0,s.jsx)(Te,{status:m.status,isHidden:m.isHidden})}),(0,s.jsxs)("div",{className:"flex flex-1 justify-end space-x-2",children:[(0,s.jsx)(Un,{panelIsSmall:A,commentIpRegion:m.ipRegion}),(0,s.jsx)(B.c,{timestamp:m.creationDate,useCalendarIcon:!1,createdAtClassName:(0,p.yI)("justify-end",ze),formattedDateClassName:(0,p.yI)(g.Cj.label3,"text-[11px] leading-[13px]")}),(0,s.jsx)(On,{isMyself:Ee,commentStatus:m.status})]})]}),(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.label1,"mb-2.5 text-xs",Re),children:(0,s.jsx)(_n,{content:m.content})})]}),(0,s.jsx)("div",{className:(0,p.yI)("mt-4 flex items-center gap-4 text-xs",g.Cj.label2),children:(0,s.jsxs)("div",{className:(0,p.yI)("flex items-center gap-4",Re),children:[(0,s.jsx)(ae,{comment:m,isMyself:Ee,trackingCommentType:ee.Reply}),(0,s.jsx)(ue,{showLabel:Be,onClick:we}),(0,s.jsxs)(N.u,{className:"flex items-center gap-4 text-xs",show:pe,enter:"transition ease-out duration-200",leave:"transition ease-in duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[(0,s.jsx)(de,{showLabel:Be,isOwnPost:m.isOwnPost,onClick:je}),(0,s.jsx)(ve,{showLabel:Be,commentId:m.id,onShareClick:qe}),De&&(0,s.jsx)(Le,{comment:m,parentComment:a,updateModal:f}),(0,s.jsx)(ke,{comment:m,isPinnable:!1,updateConfirmModal:f,updateReportModal:x})]})]})})]})]}),Ce&&(0,s.jsxs)("div",{className:"mt-4 flex px-3",children:[(0,s.jsx)(R.D,{userAvatar:He,username:Me,imgClassName:(0,p.yI)("mr-2 max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6")}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(Ln,{value:X,onSave:Ze,disabled:oe,innerRef:ge,topicId:E||0,onChange:te,onCancel:Ie,variation:Fe.Slim})})]})]})},Fn=t(46398),Wn=t(27415),Yn=function(){return(0,s.jsx)("div",{className:(0,p.yI)("flex h-full w-full"),children:(0,s.jsxs)(Fn.O,{className:"flex w-full flex-col space-y-5",children:[(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"h-8",children:(0,s.jsx)(Wn.a,{className:"!h-full w-8 rounded-full"})}),(0,s.jsxs)("div",{className:"flex w-[80px] flex-col space-y-2",children:[(0,s.jsx)(Wn.a,{className:"h-4 w-3/4"}),(0,s.jsx)(Wn.a,{className:"h-[14px] w-full"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,s.jsx)(Wn.a,{className:"h-4 w-full"}),(0,s.jsx)(Wn.a,{className:"h-4 w-1/3"})]})]})})},Jn=function(){return(0,s.jsx)("div",{className:(0,p.yI)("flex h-full w-full"),children:(0,s.jsxs)(Fn.O,{className:"flex w-full",children:[(0,s.jsxs)("div",{className:"flex w-full space-x-3",children:[(0,s.jsx)("div",{className:"h-6",children:(0,s.jsx)(Wn.a,{className:"!h-full w-6 rounded-full"})}),(0,s.jsxs)("div",{className:"flex flex-1 flex-col space-y-2",children:[(0,s.jsxs)("div",{className:"flex w-full justify-between",children:[(0,s.jsx)(Wn.a,{className:"h-3 w-1/3"}),(0,s.jsx)(Wn.a,{className:"h-3 w-[80px]"})]}),(0,s.jsx)(Wn.a,{className:"h-[12px] w-full"}),(0,s.jsx)(Wn.a,{className:"h-[12px] w-2/3"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,s.jsx)(Wn.a,{className:"h-3 w-full"}),(0,s.jsx)(Wn.a,{className:"h-3 w-1/3"})]})]})})},Xn=function(e){var n=e.itemsCount,t=Array(n).fill(null);return(0,s.jsx)("div",{className:"flex flex-col gap-8 px-1 py-3",children:t.map((function(e,n){return(0,s.jsx)(Yn,{},n)}))})},et=function(e){return e},nt=function(e){var n=e.parentComment,t=e.highlightedReplyId,o=e.hideReplies,i=e.updateConfirmModal,a=e.updateReportModal,r=(0,l.useState)(5),c=r[0],d=r[1],m=$().state.questionSlug,f=En({commentId:n.id,pageNo:1,numPerPage:c,upToReplyId:t}),x=f.isInitialLoading,C=f.data,y=(null!==C&&void 0!==C?C:{}).comments;(0,l.useEffect)((function(){return d((function(e){return(null===y||void 0===y?void 0:y.length)?y.length:e}))}),[null===y||void 0===y?void 0:y.length]);var j,b=(0,u.$G)("comments").t,N=((null===C||void 0===C?void 0:C.total)||0)>c,w=(0,l.useCallback)((function(){N&&(d(c+5),m&&h.d.qdExpandCommentClick({qd_version:(0,v.in)(),qd_question_slug:m}))}),[c,N,m]),I=(0,l.useCallback)((function(){o(),d(5)}),[o]),k=null!==(j=null===y||void 0===y?void 0:y.map((function(e){return e.userSlug})))&&void 0!==j?j:[],S=(0,Ze.Ew)(k).data,Z=et(y,S);return x?(0,s.jsx)("div",{className:"mx-5",children:(0,s.jsx)(Jn,{})}):(0,s.jsxs)("div",{className:"flex flex-col",children:[Z&&Z.map((function(e){return(0,s.jsx)(Qn,{parentComment:n,comment:e,updateConfirmModal:i,updateReportModal:a},e.id)})),(0,s.jsxs)("div",{className:"flex w-full justify-between px-3 pt-2",children:[(0,s.jsx)("div",{onClick:w,className:(0,p.yI)("cursor-pointer text-xs font-medium",g.Cj.labelBlueStandard,{flex:N,invisible:!N}),children:b("showMoreReplies")}),(0,s.jsx)("div",{onClick:I,className:(0,p.yI)("group cursor-pointer pb-3 pr-3"),children:(0,s.jsx)(z.E,{icon:Se.S,label:String(b("hide")),labelClassName:(0,p.yI)(g.Cj.label1GroupHover),iconClassName:(0,p.yI)("w-4 h-4",g.Cj.label1GroupHover)})})]})]})},tt=function(e){var n=e.content,t=(0,u.$G)("comments").t,o=(0,l.useState)(!1),i=o[0],a=o[1],r=(0,l.useState)(null),c=r[0],d=r[1],m=(0,l.useState)(!1),f=m[0],v=m[1],h=(0,Dn.a)(c),x=h.width,C=h.height;(0,k.L)((function(){setTimeout((function(){v(((null===c||void 0===c?void 0:c.scrollHeight)||0)>=230)}),1)}),[c,n,C]);var y,j,N=(0,l.useMemo)((function(){return f&&!i}),[f,i]),w=(0,l.useCallback)((function(){v(((null===c||void 0===c?void 0:c.scrollHeight)||0)>=230)}),[null===c||void 0===c?void 0:c.scrollHeight]),I=(0,l.useMemo)((function(){return(0,Bn.Z)(w,250)}),[w]);return(0,l.useEffect)((function(){x&&I()}),[x,I]),(0,s.jsxs)("div",{className:(0,p.yI)("relative",(y={},(0,b.Z)(y,"overflow-hidden",N),(0,b.Z)(y,"block",!N),(0,b.Z)(y,"max-h-[230px]",!i),(0,b.Z)(y,"max-h-full",i),y)),children:[(0,s.jsx)("div",{ref:d,children:(0,s.jsx)(vn.J,{content:n})}),(0,s.jsx)("div",{className:(0,p.yI)("cursor-pointer",(j={},(0,b.Z)(j,"from-layer-1 dark:from-dark-layer-1 absolute top-0 flex h-full w-full items-end bg-gradient-to-t",N),(0,b.Z)(j,"hidden",!N),j)),onClick:function(){return a(!0)},children:(0,s.jsx)("div",{className:(0,p.yI)("text-md flex w-full items-center justify-center",g.Cj.label1),children:t("readMore")})})]})},ot=t(62758),it=l.forwardRef((function(e,n){return(0,s.jsx)("svg",(0,a.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:n},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M12.93 3.586a2 2 0 012.829 0l4.849 4.849a2 2 0 010 2.828l-4.497 4.496a2 2 0 00-.558 1.086l-.586 3.512a1 1 0 01-1.693.543L8.99 16.617l-3.879 3.879a1 1 0 01-1.414-1.415l3.879-3.878-4.283-4.283a1 1 0 01.543-1.694l3.512-.585a2 2 0 001.085-.559l4.497-4.496z",clipRule:"evenodd"})}))})),at=function(e){var n=e.pinnedBy,t=(0,u.$G)("comments").t;return(0,s.jsx)("div",{className:"w-fit",children:(0,s.jsx)(ot.u,{label:t("pinnedBy",{pinnedBy:n}),children:(0,s.jsxs)("div",{className:(0,p.yI)(g.Cj.labelBlueStandard,"flex items-center space-x-1.5 text-xs font-medium"),children:[(0,s.jsx)(it,{}),(0,s.jsx)("span",{children:t("pinned")})]})})})},rt=function(e){var n,t=e.type,o=$().state.tagNamesMap;return(0,s.jsx)("div",{className:"inline-block",children:(0,s.jsx)("div",{className:(0,p.yI)(g.Cj.fill3,g.Cj.label2,"rounded-[38px] px-2.5 py-0.5 text-xs font-medium"),children:null!==(n=o.get(t))&&void 0!==n?n:"Unknown"})})},st=function(e){var n,t,i,a=e.comment,m=e.updateConfirmModal,f=e.updateReportModal,x=(0,u.$G)("comments").t,y=(0,I.v)(a.username),j=(0,l.useState)(!1),D=j[0],_=j[1],M=(0,l.useRef)(null),H=(0,l.useRef)(null),A=(0,l.useRef)(null),E=$(),z=E.state,P=z.topicId,O=z.highlightedCommentId,G=z.parentOfHighlightedCommentId,V=z.layoutType,U=z.isModerator,K=z.panelIsSmall,Q=z.questionSlug,F=E.dispatch,W=(0,l.useState)(!1),Y=W[0],J=W[1],X=(0,C.Z)(q(),2),ne=X[0],te=X[1];(0,l.useEffect)((function(){ne(Y?null:A.current),Y&&Z(M.current)}),[ne,Y]);var oe=O===a.id,re=G===a.id,le=O!==a.id?O:void 0,ce=(0,c.U5)().data,me=(null===ce||void 0===ce||null===(n=ce.userStatus)||void 0===n?void 0:n.name)||(null===ce||void 0===ce||null===(t=ce.userStatus)||void 0===t?void 0:t.username)||"",fe=(null===ce||void 0===ce||null===(i=ce.userStatus)||void 0===i?void 0:i.avatar)||"";(0,k.L)((function(){oe&&H.current&&H.current.scrollIntoView()}),[oe]),(0,k.L)((function(){if(O){re&&_(!0);var e=function(){return F({type:"highlightedCommentId",payload:void 0})};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[O,re,F]);var pe=(0,l.useState)(!1),he=pe[0],xe=pe[1];(0,l.useEffect)((function(){return he?Z(M.current):void 0}),[he]);var Ce=(0,l.useCallback)((function(){_(!D),Q&&(!D&&h.d.qdShowRepliesClick({qd_version:(0,v.in)(),qd_question_slug:Q}),D&&h.d.qdHideRepliesClick({qd_version:(0,v.in)(),qd_question_slug:Q}))}),[D,Q]),ye=(0,S.r)().isSignedIn,ge=(0,l.useCallback)((function(){ye?(xe((function(e){return!e})),!he&&Q&&h.d.qdReplyCommentClick({qd_version:(0,v.in)(),qd_question_slug:Q,qd_comment_pos:ie(V),qd_comment_type:ee.Comment})):d.y.error(x("common:loginRequired"))}),[ye,x,Q,V,he]),je=(0,l.useCallback)((function(){_(!1),Q&&h.d.qdHideRepliesClick({qd_version:(0,v.in)(),qd_question_slug:Q})}),[Q]),be=(0,l.useCallback)((function(){return xe(!1)}),[]),Ne=(0,l.useCallback)((function(){return J(!1)}),[]),we=Hn({commentId:a.id}),Ie=Ge({queryKey:we,parentComment:a}),Se=Ie.value,Ze=Ie.onSave,Te=Ie.onCommentChange,qe=Ie.isSaving,Re=Ge({queryKey:a.queryKey,existingComment:a}),Be=Re.value,De=Re.onEdit,_e=Re.onCommentChange,Me=Re.isSaving,He=function(){var e=(0,o.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ze()];case 1:return(e=n.sent()).ok&&(_(!0),xe(!1),Q&&h.d.qdSubmitCommentClick({qd_version:(0,v.in)(),qd_question_slug:Q,qd_comment_pos:ie(V),qd_comment_type:ee.Reply})),[2,e]}}))}));return function(){return e.apply(this,arguments)}}(),Ae=(0,l.useCallback)((function(){Q&&h.d.qdShareCommentClick({qd_version:(0,v.in)(),qd_question_slug:Q,qd_comment_pos:ie(V),qd_comment_type:ee.Comment})}),[Q,V]),Ee=(0,l.useCallback)((function(){return J(!0)}),[]),ze=function(){var e=(0,o.Z)((function(){return(0,r.__generator)(this,(function(e){return[2,De().then((function(e){var n=e.ok;return n&&J(!1),{ok:n}}))]}))}));return function(){return e.apply(this,arguments)}}(),Pe=$n(a),Oe=Pe.hiddenCls,Ve=(0,T.tq)(),Ue=!Ve&&!K,$e=!(a.status===w.$4.Deleted)&&(a.isOwnPost&&!U);return Y?(0,s.jsx)("div",{className:(0,p.yI)("mx-2 px-3 py-3"),children:(0,s.jsx)(Ln,{value:Be,onSave:ze,onSaveText:x("save"),defaultValue:a.content,disabled:Me,innerRef:M,topicId:P||0,onChange:_e,onCancel:Ne,variation:Fe.Full})}):(0,s.jsxs)("div",{className:(0,p.yI)("px-1 transition-[background] duration-500",(0,b.Z)({},(0,p.yI)(g.Cj.bgBlue0,"rounded-lg"),oe)),ref:H,children:[(0,s.jsxs)("div",{className:(0,p.yI)("flex w-full flex-col py-3"),ref:A,children:[(0,s.jsxs)("div",{className:(0,p.yI)("flex w-full items-center gap-3",Oe),children:[(0,s.jsx)(R.D,{userAvatar:a.userAvatar,username:a.username}),(0,s.jsxs)("div",{className:"flex w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[a.pinned&&(0,s.jsx)(at,{pinnedBy:a.pinnedBy.username}),(0,s.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,s.jsx)(L.S,{realName:a.realName,username:a.username,badgeIcon:a.activeBadgeIcon,badgeName:a.activeBadgeName,reputation:a.reputation,badgeClassName:(0,p.yI)("h-4 w-4 ml-1"),userClassName:(0,p.yI)(g.Cj.label1,"font-medium",Pe.authorCls)}),(0,s.jsx)(Gn,{comment:a})]})]}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-end gap-2",children:[(0,s.jsx)(Vn,{commentIpRegion:a.ipRegion,panelIsSmall:K}),a.isEdited&&!K&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:(0,p.yI)("h-[3px] w-[3px] rounded",g.Cj.fillGray5)}),(0,s.jsx)("span",{className:(0,p.yI)("text-xs leading-[13px]",g.Cj.label3),children:x("edited")}),(0,s.jsx)("span",{className:(0,p.yI)("h-[3px] w-[3px] rounded",g.Cj.fillGray5)})]}),(0,s.jsx)(B.c,{timestamp:a.creationDate,useCalendarIcon:!1,createdAtClassName:(0,p.yI)("justify-end",Pe.CreatedAtCls),formattedDateClassName:(0,p.yI)(g.Cj.label3,"text-[11px] leading-[13px]")}),(0,s.jsx)(Pn,{isMyself:y,commentStatus:a.status})]})]})]}),(0,s.jsxs)("div",{className:(0,p.yI)("mt-2 flex w-full flex-col",g.Cj.label2),children:[(0,s.jsx)("div",{className:(0,p.yI)(Oe),children:(0,s.jsx)(tt,{content:a.content})}),a.intentionTag&&(0,s.jsx)("div",{className:"mt-2.5",children:(0,s.jsx)(rt,{type:a.intentionTag})}),(0,s.jsx)("div",{className:"mt-4 flex items-center gap-4",children:(0,s.jsxs)("div",{className:(0,p.yI)("flex items-center gap-4 text-xs",Oe),children:[(0,s.jsx)(ae,{comment:a,isMyself:y,trackingCommentType:ee.Comment}),(0,s.jsx)(se,{onClick:Ce,showLabel:Ue,showReplies:D,repliesNum:a.numChildren}),(0,s.jsx)(ue,{showLabel:Ue,onClick:ge}),(0,s.jsxs)(N.u,{className:"flex items-center gap-4 text-xs",show:te||Ve,enter:"transition ease-out duration-200",leave:"transition ease-in duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:[(0,s.jsxs)("div",{className:(0,p.yI)("flex items-center gap-4",Oe),children:[(0,s.jsx)(de,{showLabel:Ue,isOwnPost:a.isOwnPost,onClick:Ee}),(0,s.jsx)(ve,{showLabel:Ue,commentId:a.id,onShareClick:Ae}),$e?(0,s.jsx)(Le,{comment:a,updateModal:m,topicId:null!==P&&void 0!==P?P:void 0}):null]}),(0,s.jsx)(ke,{comment:a,updateConfirmModal:m,updateReportModal:f})]})]})})]})]}),he&&(0,s.jsxs)("div",{className:"mt-3 flex px-3",children:[(0,s.jsx)(R.D,{userAvatar:fe,username:me,imgClassName:(0,p.yI)("mr-2 max-w-[24px] max-h-[24px] min-h-[24px] min-w-[24px] h-6 w-6")}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(Ln,{value:Se,onSave:He,disabled:qe,innerRef:M,topicId:P||0,onChange:Te,onCancel:be,variation:Fe.Slim})})]}),D&&(0,s.jsx)(nt,{parentComment:a,highlightedReplyId:le,hideReplies:je,updateConfirmModal:m,updateReportModal:f})]})},lt=function(e){return e},ut=function(e){var n,t,o=e.comments,a=e.isLoading,r=e.commentsCountToLoad,c=(0,u.$G)("comments").t,d=(0,y.t)({className:"z-modal",cancelBtnCls:"py-1.5",confirmBtnCls:"py-1.5"}),m=d.modal,f=d.update,v=(0,C.Z)(function(){var e=(0,l.useState)({visible:!1,comment:void 0}),n=e[0],t=e[1];return[n,(0,l.useCallback)((function(e){return t((function(n){return(0,i.Z)({},n,e)}))}),[t])]}(),2),h=v[0],x=v[1],b=(0,l.useCallback)((function(){return x({visible:!1,comment:void 0})}),[x]),N=lt(o);return a?(0,s.jsx)(Xn,{itemsCount:r}):N&&N.length>0?(0,s.jsxs)("div",{children:[N.map((function(e){return(0,s.jsx)(st,{comment:e,updateConfirmModal:f,updateReportModal:x},e.id)})),m,(0,s.jsx)(j.y,{visible:h.visible,commentId:null===(n=h.comment)||void 0===n?void 0:n.id,postId:null===h||void 0===h||null===(t=h.comment)||void 0===t?void 0:t.postId,onCancel:b})]}):(0,s.jsx)("div",{className:(0,p.yI)("w-full p-5 text-center",g.Cj.label4),children:c("noComments")})},ct=t(94713),dt=function(e){return(0,Je.Z)([{value:oe.f.Best,text:e("best")},{value:oe.f.MostVotes,text:e("mostVotes")},{value:oe.f.NewestToOldest,text:e("newestToOldest")},{value:oe.f.OldestToNewest,text:e("oldestToNewest")}])},mt=function(e){var n=e.className,t=e.sortBy,o=e.setSortBy,i=(0,u.$G)("comments").t,a=(0,l.useMemo)((function(){return dt(i)}),[i]),r=a.find((function(e){return e.value===t}));return(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(Cn.L,{selected:null===r||void 0===r?void 0:r.value,icon:(0,s.jsx)(yn.h,{}),btnClassName:(0,p.yI)("p-0 bg-transparent dark:bg-transparent hover:bg-transparent dark:hover:bg-transparent active:bg-transparent dark:active:bg-transparent",g.Cj.label2),itemsClassName:n,itemClassName:(0,p.yI)("font-normal",g.Cj.label2),itemSelectedClassName:(0,p.yI)("font-medium",g.Cj.label1),setSelected:function(e){e&&o(e)},items:a,btnText:(0,s.jsxs)("div",{className:(0,p.yI)("text-xs",g.Cj.label2),children:[(0,s.jsxs)("span",{className:"mr-2",children:[i("sortBy"),":"]}),(0,s.jsx)("span",{className:(0,p.yI)(g.Cj.label1,"font-medium"),children:null===r||void 0===r?void 0:r.text})]})})})},ft=function(e){var n=e.total,t=e.sortBy,o=e.setSortBy,i=(0,u.$G)("comments").t;return(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)(ct.h,{className:(0,p.yI)("h-6 w-6",g.Cj.labelGrey6)})}),(0,s.jsxs)("div",{className:(0,p.yI)("flex-1 text-base font-medium",g.Cj.label1),children:[i("comments")," (",(0,_.ZP)(n),")"]}),(0,s.jsx)("div",{children:(0,s.jsx)(mt,{sortBy:t,setSortBy:o,className:"right-0"})})]})},vt=t(66247),pt=t(34275),ht=t(40791),xt=t(385);!function(e){e.Discussion="discussion",e.OfficialSolution="officialSolution"}(un||(un={}));var Ct=function(e){var n=e.title,t=e.onClose,o=e.children,i=e.className;return(0,s.jsx)("div",{className:(0,p.yI)("w-full rounded-[13px] border p-4",g.Cj.fill4,g.Cj.divider4,i),children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-start gap-3",children:[(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:(0,p.yI)("font-medium",g.Cj.label1),children:n}),(0,s.jsx)("div",{className:"cursor-pointer",onClick:t,children:(0,s.jsx)(xt.F,{className:(0,p.yI)("h-4 w-4",g.Cj.labelGrey6,g.Cj.labelGrey7Hover)})})]}),(0,s.jsx)("div",{className:(0,p.yI)("flex w-full flex-col items-start gap-4 text-xs",g.Cj.label2),children:o})]})})},yt=function(e){var n=(0,C.Z)((0,vt._)("".concat(e,"CommentingRulesExpiration"),void 0),2),t=n[0],o=n[1],i=(0,l.useCallback)((function(){var e=(0,pt.B)().add(7,"d").valueOf();o(e)}),[o]);return{isExpired:!!(!t||!(0,pt.B)(Number(t)).isValid())||(0,pt.B)(t).isBefore((0,pt.B)()),setToExpire:i}},gt=function(e){var n=e.discussionType,t=e.className,o=yt(n),i=o.isExpired,a=o.setToExpire,r=function(e){var n,t=(0,p.yI)("text-xs font-medium",g.Cj.labelBlueStandard);return(n={},(0,b.Z)(n,un.OfficialSolution,{title:"\ud83d\udca1 Article Commenting Rules",content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["1. This comment section is for questions and comments regarding this ",(0,s.jsx)("b",{children:"LeetCode article"}),". All posts must respect our"," ",(0,s.jsx)(ht.r,{className:t,href:D.Hb.communityRules(),isExternal:!0,children:"LeetCode Community Rules"}),"."]}),(0,s.jsxs)("p",{children:["2. Concerns about errors or bugs in the article, problem description, or test cases should be posted on"," ",(0,s.jsx)(ht.r,{className:t,href:D.Hb.feedback(),isExternal:!0,children:"LeetCode Feedback"}),", so that our team can address them."]})]})}),(0,b.Z)(n,un.Discussion,{title:"\ud83d\udca1 Discussion Rules",content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["1. Please don't post ",(0,s.jsx)("b",{children:"any solutions"})," in this discussion."]}),(0,s.jsx)("p",{children:"2. The problem discussion is for asking questions about the problem or for sharing tips - anything except for solutions."}),(0,s.jsx)("p",{children:"3. If you'd like to share your solution for feedback and ideas, please head to the solutions tab and post it there."})]})}),n)[e]}(n),u=(0,l.useState)(!1),c=u[0],d=u[1];return(0,l.useEffect)((function(){return d(i)}),[i]),c?(0,s.jsx)(Ct,{title:r.title,onClose:a,className:t,children:r.content}):null},jt=oe.f.Best;var bt=function(e){var n=e.topicId,t=e.orderBy,o=void 0===t?jt:t,i=e.pageNo,a=void 0===i?1:i,r=e.numPerPage,s=void 0===r?10:r;return W.zCE.getKey({topicId:n,orderBy:o,pageNo:a,numPerPage:s})};var Nt=function(e,n){var t=e.isDiscuss,o=e.topicId,i=e.orderBy,a=void 0===i?jt:i,r=e.pageNo,s=void 0===r?1:r,l=e.numPerPage,u=void 0===l?10:l,c=n.enabled,d=W.zCE.getKey({topicId:o,pageNo:s,numPerPage:u,orderBy:a});return(0,W.zCE)(Y.f6,{topicId:o,pageNo:s,numPerPage:u,orderBy:a},{enabled:c,select:function(e){var n=e.topicComments||{},o=n.data,i=n.totalNum;if(!o)return{total:i||0,comments:[]};var a=o.map((function(e){var n,o,i,a,r,s,l,u,c,m,f,v,p;return{id:e.id,pinned:e.pinned||!1,content:(0,Be.pC)(e.post.content),pinnedBy:{username:(null===(n=e.pinnedBy)||void 0===n?void 0:n.username)||""},postId:e.post.id,voteCount:e.post.voteCount,voteStatus:Mn(e.post.voteStatus||0),status:e.post.status,isHidden:e.post.isHidden||!1,creationDate:e.post.creationDate||0,isDiscussAdmin:(null===(o=e.post.author)||void 0===o?void 0:o.isDiscussAdmin)||!1,isDiscussStaff:(null===(i=e.post.author)||void 0===i?void 0:i.isDiscussStaff)||!1,userAvatar:(null===(a=e.post.author)||void 0===a?void 0:a.profile.userAvatar)||"",username:(null===(r=e.post.author)||void 0===r?void 0:r.username)||"",realName:null===(s=e.post.author)||void 0===s?void 0:s.profile.realName,isActive:(null===(l=e.post.author)||void 0===l?void 0:l.isActive)||!1,nameColor:(null===(u=e.post.author)||void 0===u?void 0:u.nameColor)||"",activeBadgeIcon:(null===(c=e.post.author)||void 0===c||null===(m=c.activeBadge)||void 0===m?void 0:m.icon)||"",activeBadgeName:(null===(f=e.post.author)||void 0===f||null===(v=f.activeBadge)||void 0===v?void 0:v.displayName)||"",queryKey:d,isOwnPost:e.post.isOwnPost||!1,numChildren:e.numChildren,intentionTag:t?null===(p=e.intentionTag)||void 0===p?void 0:p.slug:void 0,ipRegion:""}}));return{total:i||0,comments:a}}})},wt=function(e,n){var t=e.topicId,o=void 0===t?0:t,r=e.commentId,s=void 0===r?0:r,l=e.orderBy;return(0,W.e63)(Y.f6,{topicId:o,commentId:s,orderBy:l},(0,a.Z)((0,i.Z)({},n),{select:function(e){if(!(null===e||void 0===e?void 0:e.commentContext))return null;var n=JSON.parse(e.commentContext),t=n.pageNo,o=n.parentId;return{pageNo:Number(t),parentCommentId:Number(o)}}}))},It=t(83409),kt=function(e){var n,t,C,y,g,j=e.topicId,b=e.commentCount,N=e.commentId,w=e.layoutType,I=e.hideComments,k=e.uniqueKey,S=e.className,Z=e.scrollToCommentsOnLoad,T=(0,l.useRef)(null),q=(0,u.$G)("common").t,R=$(),L=R.state,B=R.dispatch,D=L.topicId,_=L.isModerator,M=L.highlightedCommentId,H=L.parentOfHighlightedCommentId,A=L.content,E=L.intentionTag,z=L.containerDom,P=L.questionSlug,G=(0,O.S6)((function(e){return e.setCommentsTopAnchor}));(0,l.useEffect)((function(){return B({type:"layoutType",payload:w})}),[B,w]);var V=null===(n=(0,c.U5)())||void 0===n||null===(t=n.data)||void 0===t?void 0:t.userStatus,U=null===(C=(0,c.U5)())||void 0===C||null===(y=C.data)||void 0===y||null===(g=y.userStatus)||void 0===g?void 0:g.isSignedIn,K=Boolean(null===V||void 0===V?void 0:V.isAdmin),Q=(0,l.useState)(oe.f.Best),F=Q[0],W=Q[1],Y=(0,l.useCallback)((function(e){P&&h.d.qdSortCommentClick({qd_version:(0,v.in)(),qd_question_slug:P,qd_sort_type:e,qd_comment_pos:w}),W(e)}),[P,w]),J=(0,l.useState)(1),X=J[0],ne=J[1],te={topicId:j,orderBy:F,pageNo:X,numPerPage:10},ae=bt(te),re=w===O.Dk.Description,se=w===O.Dk.Discuss||re,le=(0,x.Q)({domElement:z,threshold:475});(0,l.useEffect)((function(){return B({type:"panelIsSmall",payload:le})}),[B,le]);var ue,ce,de=Ge({queryKey:ae,initialContent:se?A:void 0,initialIntentionTag:se?E:void 0,saveDraft:se,setPageNo:ne}),me=de.value,fe=de.onSave,ve=de.onCommentChange,pe=de.isSaving,he=de.intentionTag,xe=de.onIntentionTagChange,Ce=Boolean(j&&!I&&0!==b),ye=Nt((0,a.Z)((0,i.Z)({},te),{isDiscuss:se}),{enabled:Ce}),ge=ye.data,je=ye.isInitialLoading,be=wt({commentId:N,orderBy:F,topicId:j},{enabled:Boolean(N&&Ce)}).data,Ne=(0,l.useRef)(null),we=(0,l.useRef)(null),Ie=(0,It.M)((function(e){return e.discussionDom})),ke=(0,l.useCallback)((function(e){var n;ne(e),null===(n=we.current)||void 0===n||n.scrollIntoView()}),[]);(0,l.useEffect)((function(){!Z||je||w!==O.Dk.Description||N||null===Ie||void 0===Ie||Ie.scrollIntoView()}),[Z,je,Ie,w,N]),(0,l.useEffect)((function(){_!==K&&B({type:"isModerator",payload:K}),M!==N&&B({type:"highlightedCommentId",payload:N}),H!==N&&B({type:"parentOfHighlightedCommentId",payload:N}),H!==(null===be||void 0===be?void 0:be.parentCommentId)&&B({type:"parentOfHighlightedCommentId",payload:null===be||void 0===be?void 0:be.parentCommentId})}),[j,D,K,_,be]),(0,l.useEffect)((function(){be&&ne(be.pageNo)}),[be]);var Se=null!==(ce=null!==(ue=null===ge||void 0===ge?void 0:ge.total)&&void 0!==ue?ue:b)&&void 0!==ce?ce:0,Ze=Math.min(Se-10*(X-1),10),Te=(0,f.z)((0,o.Z)((function(){return(0,r.__generator)(this,(function(e){return U?[2,fe().then((function(e){var n=e.ok;return n&&P&&h.d.qdSubmitCommentClick({qd_version:(0,v.in)(),qd_question_slug:P,qd_comment_pos:ie(w),qd_comment_type:ee.Comment}),{ok:n}}))]:(d.y.error(q("loginRequired")),[2,Promise.resolve({ok:!1})])}))})));return(0,l.useLayoutEffect)((function(){B({type:"containerDom",payload:Ne.current}),k&&G(k,we.current)}),[B,k,G]),(0,s.jsxs)("div",{className:(0,p.yI)("flex h-full flex-col px-4",{"px-1":re},S),ref:Ne,children:[!se&&(0,s.jsx)(ft,{total:Se,sortBy:F,setSortBy:Y}),(0,s.jsx)("div",{className:(0,p.yI)("mt-3"),children:(0,s.jsx)(Ln,{value:me,disabled:pe,onSave:Te,topicId:j,innerRef:T,onChange:ve,variation:Fe.Full,intentionTag:he,onIntentionTagChange:xe})}),se&&(0,s.jsxs)("div",{className:(0,p.yI)("mt-3"),children:[(0,s.jsx)(gt,{discussionType:un.Discussion,className:"mb-3"}),(0,s.jsx)("div",{className:"pt-3",children:(0,s.jsx)(mt,{sortBy:F,setSortBy:Y,className:"left-0"})})]}),w===O.Dk.OfficialSolution&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(gt,{discussionType:un.OfficialSolution})}),(0,s.jsx)("div",{className:"mt-4 flex-1",ref:we,children:(0,s.jsx)(ut,{comments:null===ge||void 0===ge?void 0:ge.comments,commentsCountToLoad:Ze,isLoading:je})}),Se>0&&(0,s.jsx)("div",{className:(0,p.yI)("mb-4 mt-7 flex justify-center pb-4"),children:(0,s.jsx)(m.t,{disabled:je||pe,currentPage:X,totalItems:Se,maxPageItems:le?X<99?6:5:void 0,itemsPerPage:10,onChange:ke,pageItemClassName:"text-sm",chevronClassName:"w-4 h-4",arrowButtonClassName:"px-2"})})]})},St=function(e){var n=(0,a.Z)((0,i.Z)({},V),{topicId:e.topicId,questionSlug:e.questionSlug,layoutType:e.layoutType});return(0,s.jsx)(Q,{value:n,children:(0,s.jsx)(kt,(0,i.Z)({},e))})}},63244:function(e,n,t){"use strict";t.d(n,{Dk:function(){return i},S6:function(){return c}});var o,i,a=t(14924),r=t(26042),s=t(69396),l=t(64529),u=t(782);!function(e){e.UpdateState="UpdateState"}(o||(o={})),function(e){e.Discuss="Discuss",e.Solution="Solution",e.OfficialSolution="OfficialSolution",e.Description="Description",e.MarkdownGuide="MarkdownGuide"}(i||(i={}));var c=(0,l.Ue)((0,u.$e)({commentsTopAnchorMap:{}},(function(e,n){return{setCommentsTopAnchor:function(n,t){return e((function(e){return(0,s.Z)((0,r.Z)({},e),{commentsTopAnchorMap:(0,s.Z)((0,r.Z)({},e.commentsTopAnchorMap),(0,a.Z)({},n,t))})}))},scrollToCommentListTop:function(e){var t;null===(t=n().commentsTopAnchorMap[e])||void 0===t||t.scrollIntoView({behavior:"smooth"})}}})))},83409:function(e,n,t){"use strict";t.d(n,{M:function(){return s}});var o=t(26042),i=t(69396),a=t(64529),r=t(782),s=(0,a.Ue)((0,r.$e)({containerDom:null,discussionDom:null,openDiscussionAccordion:!1,openTopics:!1,topicsDom:null,openCompanies:!1,companiesDom:null,openHints:!1,hintsDom:null},(function(e){return{setContainerDom:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{containerDom:n})}))},setDiscussionDom:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{discussionDom:n})}))},setOpenDiscussionAccordion:function(n){return e((function(e){if("function"===typeof n){var t=n;return(0,i.Z)((0,o.Z)({},e),{openDiscussionAccordion:t(e.openDiscussionAccordion)})}return(0,i.Z)((0,o.Z)({},e),{openDiscussionAccordion:n})}))},setOpenTopics:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{openTopics:n})}))},setTopicsDom:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{topicsDom:n})}))},setOpenCompanies:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{openCompanies:n})}))},setCompaniesDom:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{companiesDom:n})}))},setOpenHints:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{openHints:n})}))},setHintsDom:function(n){return e((function(e){return(0,i.Z)((0,o.Z)({},e),{hintsDom:n})}))}}})))},46759:function(e,n,t){"use strict";t.d(n,{J:function(){return s}});var o=t(85893),i=t(67294),a=t(75117),r=(0,t(98540).t)({highlight:!0,gfm:!0,math:!0,html:!0,mcqs:a.Oo,diaporama:a.Oo,imageSize:!0,embedVideos:a.Oo,normalVideo:!0,groupedCode:!0,relAttribute:!0,httpsImagesOnly:!0,premiumOnlyVideo:a.Oo,htmlSanitization:!0,preserveLineBreaks:a.Oo,nodebbImageTransformation:a.Oo,brokenImageHolder:!0,linkSift:a.ob,linkTargetBlank:!0,aliPlayerVideo:a.ob,slides:a.ob,toc:!0,customComponent:!0}),s=(0,i.memo)((function(e){var n=e.content;return n?(0,o.jsx)(r,{content:n}):null}))},76575:function(e,n,t){"use strict";t.d(n,{E:function(){return r}});var o=t(85893),i=t(12922),a=t(15371),r=function(e){var n=e.className,t=e.onClick,r=e.icon,s=e.iconClassName,l=e.label,u=e.labelClassName,c=e.onIconClick,d=e.disabled,m=void 0!==l,f=void 0!==r;return(0,o.jsxs)("div",{className:(0,i.yI)("flex items-center gap-1",n),onClick:t,children:[f&&(0,o.jsx)(r,{onClick:d?void 0:c,className:(0,i.yI)("h-4 w-4",{"pointer-events-none":d},s)}),m&&(0,o.jsx)("div",{className:(0,i.yI)(a.Cj.label2,"text-xs",u),children:l})]})}},52841:function(e,n,t){"use strict";t.d(n,{T:function(){return m},l:function(){return f}});var o=t(85893),i=t(72510),a=t(84539),r=t(67294),s=t(12922),l=t(50632),u=t(64572),c=t(16142),d=t(15371),m=function(e){var n=e.onClick,t=e.className,a=e.children;return(0,o.jsx)(i.v.Item,{as:"div",onClick:n,className:(0,s.yI)("text-md w-full cursor-pointer select-none rounded px-3 py-[5px]",d.Cj.label2,d.Cj.label1Hover,d.Cj.fill3Hover,t),children:a})},f=function(e){var n,t=e.children,m=e.btnClassName,f=e.iconClassName,v=e.placement,p=void 0===v?"top":v,h=null===(n=(0,l.U5)().data)||void 0===n?void 0:n.userStatus,x=Boolean(null===h||void 0===h?void 0:h.isAdmin)?u.k:c.q;return(0,o.jsxs)(i.v,{as:"div",className:"relative",children:[(0,o.jsx)("div",{children:(0,o.jsx)(i.v.Button,{className:(0,s.yI)(d.Cj.label1Hover,"flex h-6 w-6 cursor-pointer items-center justify-center rounded-md",m),children:(0,o.jsx)(x,{className:(0,s.yI)(d.Cj.labelGrey6,d.Cj.labelGrey7Hover,"h-5 w-5",f)})})}),(0,o.jsx)(a.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,o.jsx)(i.v.Items,{style:{zIndex:30},className:(0,s.yI)(d.Cj.bgLayer3,d.Cj.divider4,d.eq.card,"absolute right-0 min-w-[200px] rounded-lg p-2 outline-none",{"top-8":"bottom"===p,"bottom-8":"top"===p,"right-unset bottom-8  left-0":"top-left"===p}),children:(0,o.jsx)("div",{children:t})})})]})}},8590:function(e,n,t){"use strict";t.d(n,{D:function(){return m}});var o=t(85893),i=t(69485),a=t(47306),r=t(93769),s=t(40791),l=t(12922),u=t(83269),c=t(70341),d=t(29297),m=function(e){var n=e.userAvatar,t=e.username,m=e.imgClassName,f=e.dontTriggerParentClickEvent,v=e.clickable,p=void 0===v||v,h=(0,o.jsx)(a.q,{src:n,alt:"",className:"h-full w-full rounded-full"}),x=(0,l.yI)("h-8 min-h-[32px] w-8 min-w-[32px]",m),C=(0,r.z2)((function(e){return e.questionSlug})),y=(0,i.z)((function(e){d.d.qdEnterAuthorProfileClick({qd_version:(0,u.in)(),qd_question_slug:C,qd_post_article_author:t}),f&&e.stopPropagation()}));return p?(0,o.jsx)(s.r,{className:x,href:c.Hb.profile(t),onClick:y,isExternal:!0,children:h}):(0,o.jsx)("div",{className:x,children:h})}},73082:function(e,n,t){"use strict";t.d(n,{S:function(){return f}});var o=t(85893),i=t(62758),a=t(69485),r=t(40791),s=t(15371),l=t(29297),u=t(12922),c=t(83269),d=t(70341),m=t(93769),f=function(e){var n=e.realName,t=e.username,f=e.badgeIcon,v=e.badgeName,p=e.isLink,h=void 0===p||p,x=e.badgeClassName,C=e.userClassName,y=e.dontTriggerParentClickEvent,g=(0,m.z2)((function(e){return e.isDynamicLayout})),j=(0,u.yI)(s.xy.labelTextSecondary,"text-sm font-medium overflow-hidden max-w-[100px] md:max-w-[200px] text-ellipsis",{"max-w-[200px]":!g}),b=(0,m.z2)((function(e){return e.questionSlug})),N=(0,a.z)((function(e){l.d.qdEnterAuthorProfileClick({qd_version:(0,c.in)(),qd_question_slug:b,qd_post_article_author:t}),y&&e.stopPropagation()}));return(0,o.jsxs)("div",{className:"flex items-center gap-1 truncate",translate:"no",children:[h?(0,o.jsx)(r.r,{onClick:N,href:d.Hb.profile(t),className:(0,u.yI)(j,s.M$.labelBlueS,"truncate",C),isExternal:!0,children:n||t}):(0,o.jsx)("div",{className:(0,u.yI)(j,C),children:n||t}),f&&v&&(0,o.jsx)(i.u,{label:v,placement:"top",children:(0,o.jsx)("div",{className:(0,u.yI)("h-3.5 w-3.5",x),children:(0,o.jsx)("img",{src:f,alt:v,className:"h-full w-full"})})})]})}},53028:function(e,n,t){"use strict";t.d(n,{c:function(){return l}});var o=t(85893),i=t(12922),a=t(86543),r=t(46283),s=t(15371),l=function(e){var n=e.timestamp,t=e.useCalendarIcon,l=void 0===t||t,u=e.createdAtClassName,c=e.formattedDateClassName,d=e.iconClassName,m=e.needDetailTooltip,f=n<1e10?1e3*n:n;return(0,o.jsxs)("div",{className:(0,i.yI)("flex items-center gap-1.5",u),children:[l&&(0,o.jsx)(r.j,{className:(0,i.yI)(s.Cj.labelGrey5,"h-4 w-4",d)}),(0,o.jsx)("div",{className:(0,i.yI)(s.Cj.label3,"min-w-max text-xs",c),children:(0,o.jsx)(a.J,{datetime:f,needDetailTooltip:m})})]})}},19898:function(e,n,t){"use strict";t.d(n,{y:function(){return D}});var o,i,a,r=t(10253),s=t(85893),l=t(67294),u=t(73935),c=t(65451),d=t(11321),m=t(12922),f=t(11095),v=t(60477),p=t(66360),h=t(385),x=t(15371),C=t(85099),y=t(14924),g=t(88525),j=t(23874),b=t(63808),N=(o={},(0,y.Z)(o,j.ZLU.Advertising,g.ua1.Advertising),(0,y.Z)(o,j.ZLU.Sexual,g.ua1.Sexual),(0,y.Z)(o,j.ZLU.Violent,g.ua1.Violent),(0,y.Z)(o,j.ZLU.Fake,g.ua1.Fake),(0,y.Z)(o,j.ZLU.Illegal,g.ua1.Illegal),(0,y.Z)(o,j.ZLU.Other,g.ua1.Other),(0,y.Z)(o,j.ZLU.Politics,g.ua1.Politics),(0,y.Z)(o,j.ZLU.NonEnglish,g.ua1.NonEnglish),(0,y.Z)(o,j.ZLU.Terrorism,g.ua1.Terrorism),(0,y.Z)(o,j.ZLU.Abuse,g.ua1.Abuse),(0,y.Z)(o,j.ZLU.All,g.ua1.Other),o),w=(new Map([[j.ZLU.Advertising,"1"],[j.ZLU.Sexual,"2"],[j.ZLU.Violent,"3"],[j.ZLU.Terrorism,"4"],[j.ZLU.Politics,"5"],[j.ZLU.Fake,"6"],[j.ZLU.Illegal,"7"],[j.ZLU.Other,void 0]]),function(){var e=(0,g.umC)(b.f6),n=e.mutateAsync;return{mutateAsync:function(e){return n(e).then((function(e){return e.flagPost}))},isLoading:e.isLoading}}),I=function(){var e=(0,g.M0W)(b.f6),n=e.mutateAsync;return{mutateAsync:function(e){var t,o,a=(t=e.flagType,null!==(i=N[t])&&void 0!==i?i:g.ua1.Other),r=e.content;return n({articleId:null!==(o=e.articleId)&&void 0!==o?o:"",reportType:a,reason:r}).then((function(e){return e.ugcArticleAddReport}))},isLoading:e.isLoading}},k=t(14150),S=t(19579),Z=function(e){var n=e.value,t=e.label;return(0,s.jsx)(c.E.Option,{value:n,as:l.Fragment,children:function(e){var n=e.checked;return(0,s.jsx)("div",{className:(0,m.yI)("flex w-full cursor-pointer flex-col py-2",x.Cj.label2,x.Cj.label1Hover),children:(0,s.jsxs)("div",{className:(0,m.yI)("flex items-center justify-between"),children:[(0,s.jsx)("span",{children:t}),n&&(0,s.jsx)(p.N,{className:(0,m.yI)("h-4 w-4",x.Cj.labelGrey6)})]})})}})},T=function(e){return[[k.ZL.Advertising,e("advertising")],[k.ZL.Sexual,e("sexual")],[k.ZL.Violent,e("violent")],[k.ZL.Terrorism,e("terrorism")],[k.ZL.Illegal,e("illegal")],[k.ZL.Abuse,e("abuse")],[k.ZL.NonEnglish,e("nonEnglish")],[k.ZL.Other,e("other")]]},q=function(){return null},R={headerBorder:(0,m.yI)(x.Cj.dividerBorder2,"border-b"),radioGroup:"flex-col",textArea:""},L=function(e){return null!==(a=e.postId)&&void 0!==a?a:0},B=function(e){return!!e},D=function(e){var n=e.visible,t=e.onCancel,o=e.articleId,i=e.postId,a=(0,d.$G)("solutions",{keyPrefix:"report"}).t,p=(0,l.useState)(null),y=p[0],g=p[1],j=(0,l.useState)(""),b=j[0],N=j[1],D=I(),_=D.mutateAsync,M=D.isLoading,H=w(),A=H.mutateAsync,E=H.isLoading,z=null===y||y===k.ZL.Other&&0===b.trim().length,P=T(a);(0,l.useEffect)((function(){n&&(N(""),g(null))}),[n]);var O=(0,l.useCallback)((function(){var n,r=y===k.ZL.Other?b:"";(B(i)?A:_)({postId:null!==(n=L(e))&&void 0!==n?n:i,flagType:y,content:null!==r&&void 0!==r?r:void 0,articleId:o}).then((function(e){(null===e||void 0===e?void 0:e.ok)?(S.y.success(a("reportSuccess"),{itemClassName:x.Cj.bgLayer3}),t()):S.y.error(a("reportError"),{itemClassName:x.Cj.bgLayer3})}))}),[y,b,i,A,_,e,o,a,t]);return(0,u.createPortal)((0,s.jsxs)(f.u,{visible:n,onCancel:t,closable:!1,maskClosable:!0,className:(0,m.yI)("w-[480px] p-0 text-base",x.Cj.bgLayer2),children:[(0,s.jsxs)("div",{className:(0,m.yI)("flex items-center px-6 py-4 text-lg font-medium",x.Cj.label1,R.headerBorder),children:[a("reportModalTitle"),(0,s.jsx)("button",{onClick:t,className:(0,m.yI)("ml-auto cursor-pointer rounded transition-all",x.Cj.fill3Hover),children:(0,s.jsx)(h.F,{className:(0,m.yI)("h-6 w-6",x.Cj.labelGrey6)})})]}),(0,s.jsxs)("div",{className:(0,m.yI)("px-6 py-2 text-xs"),children:[(0,s.jsx)(c.E,{value:y,onChange:g,className:(0,m.yI)("flex flex-wrap",R.radioGroup),children:P.map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,s.jsx)(Z,{value:t,label:o},t)}))}),y===k.ZL.Other&&(0,s.jsx)(C.g,{className:(0,m.yI)("h-[90px] rounded-lg px-3 py-2 text-sm focus:border-transparent",x.Cj.fill4,x.Cj.placeholderLabel4,x.Cj.label1,R.textArea),placeholder:a("contentPlaceholder"),value:b,onChange:N,autoSize:!0})]}),(0,s.jsx)(q,{}),(0,s.jsxs)("div",{className:(0,m.yI)("flex justify-end gap-4 p-4 text-sm"),children:[(0,s.jsx)(v.z,{onClick:t,className:"rounded-lg px-4 py-1.5",children:a("cancel")}),(0,s.jsx)(v.z,{variant:"primary",disabled:z,loading:M||E,onClick:O,className:"rounded-lg px-4 py-1.5",children:a("confirm")})]})]}),document.querySelector("#modal-root"))}},83210:function(e,n,t){"use strict";t.d(n,{d:function(){return m},z:function(){return f}});var o=t(26042),i=t(69396),a=t(99534),r=t(85893),s=t(67294),l=t(88426),u=t(29107),c=t(12922),d=function(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"animate-spin",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10a1 1 0 100-2 8 8 0 118-8 1 1 0 102 0z",clipRule:"evenodd"})})},m=(0,u.j)("relative inline-flex items-center justify-center text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-sd-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-sd-primary text-sd-primary-foreground hover:bg-sd-primary/90",outline:"border border-sd-input bg-transparent hover:bg-sd-accent text-sd-foreground hover:text-sd-accent-foreground",secondary:"bg-sd-secondary text-sd-secondary-foreground hover:bg-sd-secondary/80",ghost:"text-sd-foreground hover:bg-sd-accent hover:text-sd-accent-foreground",link:"text-sd-primary underline-offset-4 hover:underline",danger:"bg-sd-danger text-sd-fixed-white hover:bg-sd-danger/80",warning:"bg-sd-warning text-sd-fixed-white hover:bg-sd-warning/80",info:"bg-sd-info text-sd-fixed-white hover:bg-sd-info/80",success:"bg-sd-success text-sd-fixed-white hover:bg-sd-success/80"},size:{default:"h-9 px-4 py-2",xs:"h-7 rounded-sd-md px-2 text-xs",sm:"h-8 rounded-sd-md px-3 text-sm",lg:"h-10 rounded-sd-md px-8"},onlyIcon:{true:"p-0",false:""},shape:{square:"rounded-sd-md",rounded:"rounded-full"}},compoundVariants:[{size:"xs",onlyIcon:!0,class:"h-7 w-7"},{size:"sm",onlyIcon:!0,class:"h-8 w-8"},{size:"default",onlyIcon:!0,class:"h-9 w-9"},{size:"lg",onlyIcon:!0,class:"h-10 w-10"}],defaultVariants:{variant:"default",size:"default",onlyIcon:!1,shape:"square"}}),f=s.forwardRef((function(e,n){var t=e.className,s=e.variant,u=e.size,f=e.onlyIcon,v=e.shape,p=e.asChild,h=void 0!==p&&p,x=e.isLoading,C=e.children,y=(0,a.Z)(e,["className","variant","size","onlyIcon","shape","asChild","isLoading","children"]),g=h?l.g7:"button";return(0,r.jsx)(g,(0,i.Z)((0,o.Z)({className:(0,c.yI)(m({variant:s,size:u,onlyIcon:f,shape:v,className:t})),ref:n},y),{disabled:x||y.disabled,children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"opacity-0",children:C}),(0,r.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)(d,{})})]}):C}))}));f.displayName="Button"},47306:function(e,n,t){"use strict";t.d(n,{q:function(){return u}});var o=t(85893),i=t(94184),a=t.n(i),r=t(67294),s=t(19906),l="/_next/static/images/default_avatar-e9984af6de73f121d0e6801af2749ca5.jpg",u=r.forwardRef((function(e,n){var t=e.src,i=void 0===t?"":t,r=e.alt,u=void 0===r?"avatar":r,c=e.className;return(0,o.jsx)(s.y,{ref:n,src:i||l,alt:u,errPlaceholder:l,className:a()("rounded-1/2 object-cover",c)})}))},73792:function(e,n,t){"use strict";t.d(n,{L:function(){return C}});var o=t(14924),i=t(26042),a=t(69396),r=t(85893),s=t(67294),l=t(72510),u=t(84539),c=t(12922),d=t(66360),m=t(44765),f=t(15371),v={menuButton:"flex items-center rounded px-3 py-1.5 text-left cursor-pointer focus:outline-none whitespace-nowrap leading-5",menuButtonBg:f.Cj.fill3,menuButtonText:f.Cj.label2,menuButtonHover:f.Cj.fill2Hover,menuButtonActive:"active:bg-fill-3 dark:active:bg-dark-fill-3",menuButtonIcon:"w-4.5 h-4.5 flex items-center ml-3 pointer-events-none transition duration-300 ".concat(f.Cj.label3),menuButtonDisabled:f.Cj.label4,dropdownTransition:{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},menuItems:"max-w-[240px] min-w-[140px] absolute z-dropdown mt-1 rounded-lg p-2 overflow-auto focus:outline-none ".concat(f.eq.commandBar),menuItemsBg:f.Cj.bgOverlay3,menuItem:"cursor-pointer select-none relative h-8 py-1.5 pl-2 pr-12",menuItemText:f.Cj.label1,menuItemActive:"rounded ".concat(f.Cj.fill4),menuItemHover:f.Cj.fill4Hover,menuItemSelectedIconWrapper:"absolute inset-y-0 right-0 flex items-center pr-2 text-blue dark:text-dark-blue",popoverTransition:{enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1"},popoverPanel:"absolute w-max max-w-xs z-dropdown mt-1 p-2.5 rounded-lg focus:outline-none"},p=t(99534),h=t(36806),x=(0,s.forwardRef)((function(e,n){var t=e.disabled,s=e.className,l=e.icon,u=e.iconClassName,d=e.isOpen,m=e.children,f=(0,p.Z)(e,["disabled","className","icon","iconClassName","isOpen","children"]);return(0,r.jsxs)("button",(0,a.Z)((0,i.Z)({disabled:t,className:(0,c.yI)(v.menuButton,v.menuButtonBg,t?[v.menuButtonDisabled,"cursor-default"]:[v.menuButtonText,v.menuButtonHover,v.menuButtonActive],s),ref:n},f),{type:"button",children:[m,(0,r.jsx)("div",{className:(0,c.yI)(v.menuButtonIcon,(0,o.Z)({"rotate-180 transform":d},v.menuButtonDisabled,t),u),"aria-hidden":"true",children:l||(0,r.jsx)(h.C,{})})]}))})),C=function(e){var n=e.btnText,t=e.btnClassName,p=e.placeholder,h=e.icon,C=e.iconClassName,y=e.items,g=e.itemsClassName,j=e.itemClassName,b=e.itemSelectedClassName,N=e.placeholderClassName,w=void 0===N?f.Cj.label4:N,I=e.selected,k=e.setSelected,S=e.wrapperClassName,Z=e.disabled;return(0,r.jsx)(l.v,{as:"div",className:(0,c.yI)("relative",S),children:function(e){var f=e.open;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.v.Button,{as:x,className:(0,c.yI)(t,(0,o.Z)({},w,!n)),isOpen:f,icon:h,iconClassName:C,disabled:Z,children:n||p}),!Z&&(0,r.jsx)(u.u,(0,a.Z)((0,i.Z)({as:s.Fragment},v.dropdownTransition),{children:(0,r.jsx)(l.v.Items,{className:(0,c.yI)(v.menuItems,v.menuItemsBg,g),children:y.map((function(e,n){var t=e.value,i=e.text;return(0,r.jsx)(l.v.Item,{children:function(e){var n,a=e.active;return(0,r.jsxs)("div",{className:(0,c.yI)(v.menuItem,v.menuItemText,j,(n={},(0,o.Z)(n,v.menuItemActive,a),(0,o.Z)(n,null!==b&&void 0!==b?b:"",I===t),n)),onClick:function(){return k(I!==t?t:void 0)},children:[(0,r.jsx)("div",{className:"flex h-5 items-center",children:(0,r.jsx)(m.J,{children:i})}),I===t?(0,r.jsx)("span",{className:v.menuItemSelectedIconWrapper,children:(0,r.jsx)(d.N,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},n)}))})}))]})}})}},86543:function(e,n,t){"use strict";t.d(n,{J:function(){return s}});var o=t(85893),i=t(62758),a=t(34275),r=t(96454),s=function(e){var n=e.datetime,t=e.className,s=e.unix,l=void 0!==s&&s,u=e.displayDetail,c=void 0!==u&&u,d=e.needDetailTooltip,m=void 0===d||d,f=e.dateFormat,v=void 0===f?"MMM DD, YYYY":f,p=e.detailFormat,h=void 0===p?"MMM DD, YYYY HH:mm":p,x=e.placement,C=void 0===x?"top":x,y=(0,a.B)(),g=l?a.B.unix(Number(n)):(0,a.B)(n),j=(0,r.w)(y,g)?y.to(g):g.local().format(v),b=g.local().format(h),N=c?b:j;return m&&!c?(0,o.jsx)(i.u,{placement:C,label:b,children:(0,o.jsx)("span",{className:t,children:N})}):(0,o.jsx)("span",{className:t,children:N})}},44765:function(e,n,t){"use strict";t.d(n,{J:function(){return s}});var o=t(85893),i=t(67294),a=t(62758),r=t(12922),s=function(e){var n=e.children,t=e.title,s=e.className,l=(0,i.useRef)(null),u=(0,i.useState)(!1),c=u[0],d=u[1],m=function(){var e,n,t=(null===(e=l.current)||void 0===e?void 0:e.scrollWidth)||0,o=(null===(n=l.current)||void 0===n?void 0:n.clientWidth)||0;d(t>o)};return(0,i.useEffect)((function(){return m(),window.addEventListener("resize",m),function(){window.removeEventListener("resize",m)}}),[]),(0,o.jsx)(a.u,{label:c&&(0,o.jsx)(o.Fragment,{children:t||n}),children:(0,o.jsx)("div",{ref:l,className:(0,r.yI)("truncate",s),children:n})})}},26622:function(e,n,t){"use strict";t.d(n,{t:function(){return C}});var o=t(29815),i=t(85893),a=t(67294),r=t(12922),s=t(15371),l=t(75247),u=t(67222),c=t(16142),d=t(83210),m=t(14924),f=t(26042),v=t(69396),p=t(99534),h={pagination:"flex flex-nowrap items-center space-x-2",itemBase:"flex items-center justify-center px-3 h-8 rounded select-none focus:outline-none",itemDefault:"bg-fill-3 dark:bg-dark-fill-3 text-label-2 dark:text-dark-label-2",itemDisabled:"disabled:opacity-40 disabled:pointer-events-none",itemHover:"hover:bg-fill-2 dark:hover:bg-dark-fill-2",itemActive:"pointer-events-none bg-paper dark:bg-dark-gray-5 text-label-1 dark:text-dark-label-1 ".concat(s.eq.card)},x=function(e){var n,t=e.children,o=e.className,a=e.activeClassName,s=e.current,l=e.page,u=e.onClickHandler,c=(0,p.Z)(e,["children","className","activeClassName","current","page","onClickHandler"]);return(0,i.jsx)("button",(0,v.Z)((0,f.Z)({className:(0,r.yI)(h.itemBase,(n={},(0,m.Z)(n,h.itemDefault,!s),(0,m.Z)(n,h.itemHover,!s),(0,m.Z)(n,h.itemActive,s),(0,m.Z)(n,h.itemDisabled,c.disabled),(0,m.Z)(n,null!==a&&void 0!==a?a:"",s),n),o)},c),{onClick:function(){u&&u(l)},children:l||t}))},C=function(e){var n=e.className,t=e.currentPage,m=e.totalItems,f=e.onChange,v=e.pageItemClassName,p=e.activePageItemClassName,C=e.chevronClassName,y=e.arrowButtonClassName,g=e.itemsPerPage,j=void 0===g?50:g,b=e.maxPageItems,N=void 0===b?8:b,w=e.disabled,I=void 0!==w&&w,k=e.isSimple,S=void 0!==k&&k,Z=Math.ceil(m/j)||0,T=N>Z?Z:N,q=(0,o.Z)(Array(T)).map((function(e,n){return function(e,n,t,o){var i=(t=t<1?1:t)-2,a=i,r=o-i+1,s=o-t,l=n-Math.ceil((t-4)/2)-2,u=t-1;return 1===t?n:t===1/0||o<=t?e+1:t<5?n+u>o?s+e+1:n+e:0===e?1:e+1===t?o:n<a?e<a?e+1:"gap":n>r?e>1?s+e+1:"gap":1===e||e+1===u?"gap":e+l+1}(n,t,N,Z)})),R=t>1,L=t<Z,B=(0,a.useCallback)((function(e){null!=e&&f(e)}),[f]),D=function(){R&&B(t-1)},_=function(){L&&B(t+1)};return(0,a.useEffect)((function(){t>Z&&Z?B(Z):t||B(1)}),[Z,B,t]),S?(0,i.jsxs)("nav",{role:"navigation",className:(0,r.yI)(n,h.pagination),children:[(0,i.jsx)(d.z,{"aria-label":"prev",disabled:!R||I,onClick:D,variant:"ghost",className:"h-[30px] p-2",children:(0,i.jsx)(l.e,{className:(0,r.yI)(s.Cj.label2,C)})},"prev"),(0,i.jsxs)("div",{className:"text-sd-muted-foreground",children:[(0,i.jsx)("span",{className:"text-sd-foreground",children:t}),"/",Z]}),(0,i.jsx)(d.z,{"aria-label":"next",disabled:!L||I,onClick:_,variant:"ghost",className:"h-[30px] p-2",children:(0,i.jsx)(u.V,{className:(0,r.yI)(s.Cj.label2,C)})},"next")]}):(0,i.jsxs)("nav",{role:"navigation",className:(0,r.yI)(h.pagination,n),children:[(0,i.jsx)(x,{"aria-label":"prev",disabled:!R||I,onClickHandler:D,className:(0,r.yI)(v,y),children:(0,i.jsx)(l.e,{className:(0,r.yI)(s.Cj.label2,C)})},"prev"),q.map((function(e,n){return"gap"===e?(0,i.jsx)(x,{"aria-label":"gap",disabled:!0,className:v,children:(0,i.jsx)(c.q,{className:s.Cj.label2})},n):(0,i.jsx)(x,{current:e===t,page:e,onClickHandler:B,className:v,activeClassName:p,disabled:I},n)})),(0,i.jsx)(x,{"aria-label":"next",disabled:!L||I,onClickHandler:_,className:(0,r.yI)(v,y),children:(0,i.jsx)(u.V,{className:(0,r.yI)(s.Cj.label2,C)})},"next")]})}},85099:function(e,n,t){"use strict";t.d(n,{g:function(){return d}});var o=t(26042),i=t(69396),a=t(99534),r=t(10253),s=t(85893),l=t(67294),u=t(12922),c=t(15371),d=l.forwardRef((function(e,n){var t=e.value,d=void 0===t?"":t,m=e.autoSize,f=void 0!==m&&m,v=e.onChange,p=e.className,h=e.maxLength,x=e.showRecord,C=e.rows,y=e.wrapperClassName,g=(0,a.Z)(e,["value","autoSize","onChange","className","maxLength","showRecord","rows","wrapperClassName"]),j=(0,l.useCallback)((function(e){null===v||void 0===v||v(e.target.value)}),[v]),b=(0,l.useRef)(null),N=(0,l.useCallback)((function(e){b.current=e,"function"===typeof n?n(e):(null===n||void 0===n?void 0:n.current)&&(n.current=e)}),[]),w=(0,l.useState)(1),I=w[0],k=w[1],S=(0,l.useRef)(null);return(0,l.useEffect)((function(){if(f){var e=S.current;if(e){var n=new ResizeObserver((function(e){var n=(0,r.Z)(e,1)[0];k(n.target.scrollHeight/20|0)}));return n.observe(e),function(){n.disconnect()}}}}),[f]),(0,l.useEffect)((function(){var e=S.current;e&&f&&k(e.scrollHeight/20|0)}),[d,f]),(0,s.jsxs)("div",{className:(0,u.yI)("relative",y),children:[(0,s.jsx)("div",{className:"h-0 overflow-hidden",children:(0,s.jsx)("textarea",{ref:S,className:"w-full resize-none overflow-hidden px-2 leading-5 outline-none",rows:1,value:d,disabled:!0})}),(0,s.jsx)("textarea",(0,i.Z)((0,o.Z)({},g),{ref:N,maxLength:h,value:d,onChange:j,rows:f?I:C,className:(0,u.yI)({"overflow-hidden":f},"w-full rounded-lg px-2 py-2.5 leading-5","focus:border-green-s border border-transparent outline-none transition-[border-color]",p)})),h&&h>0&&x&&(0,s.jsxs)("div",{className:(0,u.yI)("absolute bottom-2 right-2 text-xs",c.Cj.label3),children:[d.length," / ",h]})]})}))},87740:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var o=t(67294),i=t(69485);function a(e,n){var t=(0,o.useState)(e),a=t[0],r=t[1],s=(0,i.z)(n),l=(0,o.useCallback)((function(e){r((function(n){var t="function"===typeof e?e(n):e;return t!==n&&s(t),t}))}),[s]);return[a,(0,o.useMemo)((function(){return{on:function(){return l(!0)},off:function(){return l(!1)},toggle:function(){return l((function(e){return!e}))},setBool:l}}),[l])]}},32601:function(e,n,t){"use strict";t.d(n,{t:function(){return C}});var o=t(26042),i=t(69396),a=t(85893),r=t(67294),s=t(73935),l=t(11321),u=t(12922),c=t(15371),d=t(11095),m=t(60477),f=t(67021),v=t(7822),p=function(e){var n,t=e.visible,o=e.loading,i=e.variant,r=e.className,p=e.modalClassName,h=e.title,x=e.titleClassName,C=e.confirmText,y=e.confirmClassName,g=e.icon,j=e.iconClassName,b=e.confirmBtn,N=e.confirmBtnCls,w=e.onConfirm,I=e.cancelBtn,k=e.cancelBtnCls,S=e.onCancel,Z=(0,l.$G)("common",{keyPrefix:"confirmModal"}).t,T=function(e){switch(e){case"info":return{icon:f.e,iconClassName:c.Cj.labelBlueStandard,confirmBtnCls:(0,u.yI)(c.Cj.bgBlueStandard,c.Cj.bgBlue3Hover,c.Cj.labelWhite)};case"danger":return{icon:v.Q,iconClassName:c.Cj.labelRedStandard,confirmBtnCls:(0,u.yI)(c.Cj.bgRedStandard,c.Cj.bgRed3Hover,c.Cj.labelWhite)};default:return{}}}(i),q=null!==(n=null!==g&&void 0!==g?g:T.icon)&&void 0!==n?n:f.e;return(0,s.createPortal)((0,a.jsx)(d.u,{visible:t,onCancel:S,closable:!1,maskClosable:!0,className:r,modalClassName:p,children:(0,a.jsxs)("div",{className:"flex space-x-5",children:[(0,a.jsx)("div",{className:(0,u.yI)("h-10 w-10",T.iconClassName,j),children:(0,a.jsx)(q,{className:"h-full w-full"})}),(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsx)("div",{className:(0,u.yI)(c.Cj.label1,"text-lg font-medium",x),children:h||Z("title")}),C&&(0,a.jsx)("div",{className:(0,u.yI)(c.Cj.label2,"mt-4 text-sm",y),children:C}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end space-x-4 text-sm font-medium",children:[(0,a.jsx)(m.z,{className:(0,u.yI)("cursor-pointer rounded-lg px-4 py-[5px]",c.Cj.label2,c.Cj.fill3,c.Cj.fill2Hover,k),onClick:S,children:I||Z("cancelBtn")}),(0,a.jsx)(m.z,{loading:o,disabled:o,className:(0,u.yI)("cursor-pointer rounded-lg px-4 py-[5px]",c.Cj.labelWhite,T.confirmBtnCls,N),onClick:w,children:b||Z("confirmBtn")})]})]})]})}),document.querySelector("#modal-root"))},h={visible:!1,title:"",confirmText:"",icon:void 0,iconClassName:"",confirmBtn:"",confirmBtnCls:"",onConfirm:function(){return null},cancelBtn:"",cancelBtnCls:"",onCancel:function(){return null}},x=function(e,n){switch(n.type){case"update":return(0,o.Z)({},e,n.payload);case"reset":return h;default:throw new Error}},C=function(e){var n=(0,r.useReducer)(x,(0,o.Z)({},h,e)),t=n[0],s=n[1],l=(0,r.useCallback)((function(e){return s({type:"update",payload:e})}),[s]),u=(0,r.useCallback)((function(){return s({type:"reset"})}),[s]),c=(0,r.useCallback)((function(){return s({type:"update",payload:{visible:!0}})}),[s]),d=(0,r.useCallback)((function(){return s({type:"update",payload:{visible:!1}})}),[s]),m=t.onCancel,f=(0,r.useCallback)((function(){d(),null===m||void 0===m||m()}),[d,m]);return{modal:(0,a.jsx)(p,(0,i.Z)((0,o.Z)({},t),{onCancel:f})),control:(0,r.useMemo)((function(){return{update:l,reset:u,show:c,hide:d}}),[l,u,c,d]),visible:t.visible,update:l,reset:u,show:c,hide:d}}},95549:function(e,n,t){"use strict";t.d(n,{v:function(){return i}});var o=t(50632),i=function(e){var n,t=(0,o.U5)().data;return e===(null===t||void 0===t||null===(n=t.userStatus)||void 0===n?void 0:n.username)}},76831:function(e,n,t){"use strict";t.d(n,{a:function(){return c}});var o=t(67294),i=t(30215),a=t(68708),r=t(29815),s=t(111),l=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!0,trailing:!0},a=(0,o.useRef)(e);(0,o.useEffect)((function(){a.current=e}),[e]);var l=i.leading,u=i.trailing;return(0,o.useCallback)(t?(0,s.Z)((function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(n=a).current.apply(n,(0,r.Z)(t))}),t,{leading:l,trailing:u}):function(){},[t,l,u])},u=t(44876),c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,o.useState)(void 0),r=t[0],s=t[1],c=(0,o.useState)(void 0),d=c[0],m=c[1],f=(0,o.useCallback)((function(){if(e){var n=e.getBoundingClientRect(),t=n.width,o=n.height;s(t),m(o)}}),[e]),v=(n||{}).throttle,p=l(f,v),h=v?p:f;return(0,u.L)((function(){if(e&&(0,a.jU)()){h();var n=new i.do(h);return n.observe(e),function(){n.unobserve(e)}}}),[h,e]),{width:r,height:d}}},73975:function(e,n,t){"use strict";t.d(n,{Q:function(){return i}});var o=t(67294),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.domElement,t=e.threshold,i=void 0===t?475:t,a=!!(null===n||void 0===n?void 0:n.clientWidth)&&(null===n||void 0===n?void 0:n.clientWidth)<i,r=(0,o.useState)(a),s=r[0],l=r[1];return(0,o.useEffect)((function(){if(n){var e=new ResizeObserver((function(){return l((null===n||void 0===n?void 0:n.clientWidth)<i)}));return e.observe(n),function(){return e.unobserve(n)}}}),[n,i]),s}},96454:function(e,n,t){"use strict";t.d(n,{u:function(){return r},w:function(){return a}});var o=t(26786),i=t(3688),a=function(e,n){return e.diff(n,"h",!0)<24},r=function(e,n){var t=n||{},a=t.hiddenFields,r=void 0===a?[]:a,s=t.prefix,l={days:"d",hours:"h",minutes:"m",seconds:"s"},u=["days","hours","minutes","seconds"].filter((function(e){return!r.includes(e)})).map((function(n,t){return 0!==t?{timeKey:n,value:e[n]()}:{timeKey:n,value:Math.floor(e["as".concat((0,o.Z)(n))]())}}));return u.slice(u.findIndex((function(e){return 0!==e.value}))||0).map((function(e){return"".concat(e.value," ").concat((0,i.Z)(s,l)[e.timeKey])})).join(" ")}},62479:function(e,n,t){"use strict";t.d(n,{g:function(){return o}});var o={"data-gramm":!1,"data-gramm_editor":!1,"data-enable-grammarly":!1}},24744:function(e,n,t){"use strict";t.d(n,{Xv:function(){return f},e9:function(){return l},pC:function(){return s}});var o=t(75840),i=t.n(o),a=t(3312),r=t.n(a),s=function(e){return i()(e)},l=function(e){return r()(e)},u=/[&<>"]/,c=/[&<>"]/g,d=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"]]);function m(e){return d.get(e)||e}function f(e){return u.test(e)?e.replace(c,m):e}},50834:function(e,n,t){var o=t(8458),i="string"===typeof o?[[e.id,o,""]]:o;(n=e.exports=o.locals||{})._getContent=function(){return i},n._getCss=function(){return""+o}}}]);